  [1m[36m (87.0ms)[0m  [1mCREATE TABLE "roles" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (15.0ms)[0m  CREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255), "password_digest" varchar(255), "created_at" datetime, "updated_at" datetime, "role_id" integer) 
  [1m[36m (14.5ms)[0m  [1mCREATE  INDEX "index_users_on_role_id" ON "users" ("role_id")[0m
  [1m[35m (17.3ms)[0m  CREATE TABLE "schema_migrations" ("version" varchar(255) NOT NULL) 
  [1m[36m (17.0ms)[0m  [1mCREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")[0m
  [1m[35m (0.1ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (14.5ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140120134037')[0m
  [1m[35m (13.5ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140120115644')
  [1m[36m (15.9ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140120114246')[0m
  [1m[35m (14.5ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140120115732')
  [1m[36m (18.9ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140120133118')[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.1ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36m (0.3ms)[0m  [1mDELETE FROM "roles"[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "roles" ("title", "created_at", "updated_at", "id") VALUES ('admin', '2014-02-04 11:13:35', '2014-02-04 11:13:35', 135138680)
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "roles" ("title", "created_at", "updated_at", "id") VALUES ('client', '2014-02-04 11:13:35', '2014-02-04 11:13:35', 121898072)[0m
  [1m[35m (4.1ms)[0m  DELETE FROM "users"
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "id", "role_id") VALUES ('client@client.com', '$2a$10$XAGOUqL4oGANjtYKeDhPKes9/FsD2GKW0R2OlMy5phMiauckas6/m', '2014-02-04 11:13:35', '2014-02-04 11:13:35', 121898072, 121898072)[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "id", "role_id") VALUES ('admin@admin.com', '$2a$10$PFQ6EaF1TvVA5T9vF.QG7OSQGYloIpBPsoqO9BBBBiCn2mmVbfgmK', '2014-02-04 11:13:35', '2014-02-04 11:13:35', 135138680, 135138680)
  [1m[36m (58.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------
RoleTest: test_Role_admin_have_permission_to_create_new_user
------------------------------------------------------------
  [1m[36mRole Load (0.2ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ? LIMIT 1[0m  [["id", 135138680]]
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------
UserTest: test_should_have_role
-------------------------------
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
  [1m[36mRole Load (0.1ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36mRole Load (0.1ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 121898072]]
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------
UserTest: test_should_user_can
------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36mRole Load (0.1ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 121898072]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------
UserTest: test_user_email_must_be_certain_format
------------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------
MainControllerTest: test_should_get_index
-----------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
Processing by MainController#index as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 121898072 LIMIT 1[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 121898072]]
  Rendered charts/_game_online.html.haml (15.3ms)
  Rendered main/index.html.haml within layouts/application (27.6ms)
Completed 200 OK in 470ms (Views: 87.1ms | ActiveRecord: 0.2ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
----------------------------------------------
SessionsControllerTest: test_should_fail_login
----------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"client@client.com", "password"=>"[FILTERED]"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."email" = 'client@client.com' LIMIT 1
Redirected to http://test.host/login
Completed 302 Found in 79ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------------
SessionsControllerTest: test_should_get_new
-------------------------------------------
Processing by SessionsController#new as HTML
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" IS NULL LIMIT 1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" IS NULL LIMIT 1
Completed 200 OK in 7ms (Views: 6.5ms | ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------
SessionsControllerTest: test_should_login
-----------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"client@client.com", "password"=>"[FILTERED]"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."email" = 'client@client.com' LIMIT 1
Redirected to http://test.host/
Completed 302 Found in 77ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------
SessionsControllerTest: test_should_logout
------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Processing by SessionsController#destroy as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 121898072 LIMIT 1
  [1m[36mRole Load (0.1ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 121898072]]
Redirected to http://test.host/login
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersControllerTest: test_should_create_user
--------------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 135138680]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"email"=>"client@client.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 135138680]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "email", "password_digest", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2014-02-04 11:13:36.783228"], ["email", "client@client.com"], ["password_digest", "$2a$04$pgSj11WjIWbgN17B1Y2BV.Jgt77IRutubxp8YCdyswsKsde9dbSAq"], ["updated_at", "2014-02-04 11:13:36.783228"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/users/135138681
Completed 302 Found in 6ms (ActiveRecord: 0.7ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
---------------------------------------------
UsersControllerTest: test_should_destroy_user
---------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Processing by UsersController#destroy as HTML
  Parameters: {"id"=>"121898072"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "users" WHERE "users"."id" = ?  [["id", 121898072]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/users
Completed 302 Found in 2ms (ActiveRecord: 0.5ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
UsersControllerTest: test_should_get_edit
-----------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
Processing by UsersController#edit as HTML
  Parameters: {"id"=>"121898072"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35mRole Load (0.1ms)[0m  SELECT "roles".* FROM "roles"
  Rendered users/_form.html.haml (34.7ms)
Completed 200 OK in 46ms (Views: 45.0ms | ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------
UsersControllerTest: test_should_get_index
------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
Processing by UsersController#index as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users"[0m
  [1m[35mRole Load (0.3ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 121898072]]
  [1m[36mRole Load (0.1ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
Completed 200 OK in 8ms (Views: 6.1ms | ActiveRecord: 0.6ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------
UsersControllerTest: test_should_get_new
----------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 135138680]]
Processing by UsersController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mRole Load (0.1ms)[0m  SELECT "roles".* FROM "roles"
  Rendered users/_form.html.haml (2.9ms)
Completed 200 OK in 7ms (Views: 5.4ms | ActiveRecord: 0.2ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------
UsersControllerTest: test_should_show_user
------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
Processing by UsersController#show as HTML
  Parameters: {"id"=>"121898072"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Completed 200 OK in 4ms (Views: 2.5ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersControllerTest: test_should_update_user
--------------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 135138680]]
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"email"=>"client@client.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "id"=>"121898072"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRole Load (0.1ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 121898072]]
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "users" SET "password_digest" = ?, "updated_at" = ? WHERE "users"."id" = 121898072[0m  [["password_digest", "$2a$04$DFaYtZQ.i4iblHQIQTs1keL.HG4xAQxroZPRLAnVdXEHUuRCxUePu"], ["updated_at", "2014-02-04 11:13:36.880332"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/users/121898072
Completed 302 Found in 6ms (ActiveRecord: 0.6ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[36m (22.9ms)[0m  [1mCREATE TABLE "roles" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (16.3ms)[0m  CREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255), "password_digest" varchar(255), "created_at" datetime, "updated_at" datetime, "role_id" integer) 
  [1m[36m (17.0ms)[0m  [1mCREATE  INDEX "index_users_on_role_id" ON "users" ("role_id")[0m
  [1m[35m (30.3ms)[0m  CREATE TABLE "schema_migrations" ("version" varchar(255) NOT NULL) 
  [1m[36m (20.0ms)[0m  [1mCREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")[0m
  [1m[35m (0.2ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (15.8ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140120134037')[0m
  [1m[35m (15.4ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140120115644')
  [1m[36m (16.2ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140120114246')[0m
  [1m[35m (16.9ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140120115732')
  [1m[36m (18.7ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140120133118')[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.1ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (2.5ms)[0m  [1mDELETE FROM "roles"[0m
  [1m[35m (1.2ms)[0m  INSERT INTO "roles" ("title", "created_at", "updated_at", "id") VALUES ('admin', '2014-02-04 16:17:57', '2014-02-04 16:17:57', 135138680)
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "roles" ("title", "created_at", "updated_at", "id") VALUES ('client', '2014-02-04 16:17:57', '2014-02-04 16:17:57', 121898072)[0m
  [1m[35m (2.2ms)[0m  DELETE FROM "users"
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "id", "role_id") VALUES ('client@client.com', '$2a$10$I1oywQXooKRTCgMt5aglsOl/ffNq.JGgZm8UswFZehGHuqYZwjOBO', '2014-02-04 16:17:57', '2014-02-04 16:17:57', 121898072, 121898072)[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "id", "role_id") VALUES ('admin@admin.com', '$2a$10$6cJGxt6iCNpaceAJscw/PeOl.RoAnSJeRKM2.BUT12tzRN843E/oC', '2014-02-04 16:17:57', '2014-02-04 16:17:57', 135138680, 135138680)
  [1m[36m (14.6ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------
RoleTest: test_Role_admin_have_permission_to_create_new_user
------------------------------------------------------------
  [1m[36mRole Load (0.2ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ? LIMIT 1[0m  [["id", 135138680]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------
UserTest: test_should_have_role
-------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
  [1m[36mRole Load (0.1ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 121898072]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------
UserTest: test_should_user_can
------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
  [1m[36mRole Load (0.1ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 121898072]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------
UserTest: test_user_email_must_be_certain_format
------------------------------------------------
  [1m[35m (2.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------
MainControllerTest: test_should_get_index
-----------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
Processing by MainController#index as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 121898072 LIMIT 1[0m
  [1m[35mRole Load (0.1ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 121898072]]
  Rendered charts/_game_online.html.haml (1.5ms)
  Rendered main/index.html.haml within layouts/application (5.1ms)
Completed 200 OK in 35ms (Views: 18.4ms | ActiveRecord: 0.2ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
SessionsControllerTest: test_should_fail_login
----------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"client@client.com", "password"=>"[FILTERED]"}
  [1m[35mUser Load (2.4ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."email" = 'client@client.com' LIMIT 1
Redirected to http://test.host/login
Completed 302 Found in 78ms (ActiveRecord: 2.4ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------
SessionsControllerTest: test_should_get_new
-------------------------------------------
Processing by SessionsController#new as HTML
  [1m[36mUser Load (2.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" IS NULL LIMIT 1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" IS NULL LIMIT 1
Completed 200 OK in 10ms (Views: 7.2ms | ActiveRecord: 2.2ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------
SessionsControllerTest: test_should_login
-----------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"client@client.com", "password"=>"[FILTERED]"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."email" = 'client@client.com' LIMIT 1
Redirected to http://test.host/
Completed 302 Found in 76ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------
SessionsControllerTest: test_should_logout
------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Processing by SessionsController#destroy as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 121898072 LIMIT 1
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 121898072]]
Redirected to http://test.host/login
Completed 302 Found in 3ms (ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersControllerTest: test_should_create_user
--------------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 135138680]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"email"=>"client@client.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 135138680]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (4.9ms)[0m  INSERT INTO "users" ("created_at", "email", "password_digest", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2014-02-04 16:17:57.379855"], ["email", "client@client.com"], ["password_digest", "$2a$04$geAb1NVPTsIt4xDrGvTN8eRGAaFjrQa0RuKQUk1sOA04ag2wClCHS"], ["updated_at", "2014-02-04 16:17:57.379855"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/users/135138681
Completed 302 Found in 12ms (ActiveRecord: 5.1ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
UsersControllerTest: test_should_destroy_user
---------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Processing by UsersController#destroy as HTML
  Parameters: {"id"=>"121898072"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (3.1ms)[0m  DELETE FROM "users" WHERE "users"."id" = ?  [["id", 121898072]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/users
Completed 302 Found in 8ms (ActiveRecord: 3.4ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------
UsersControllerTest: test_should_get_edit
-----------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
Processing by UsersController#edit as HTML
  Parameters: {"id"=>"121898072"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35mRole Load (0.1ms)[0m  SELECT "roles".* FROM "roles"
  Rendered users/_form.html.haml (12.7ms)
Completed 200 OK in 34ms (Views: 28.7ms | ActiveRecord: 0.6ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------
UsersControllerTest: test_should_get_index
------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
Processing by UsersController#index as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users"[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 121898072]]
  [1m[36mRole Load (0.1ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
Completed 200 OK in 12ms (Views: 9.1ms | ActiveRecord: 0.7ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------
UsersControllerTest: test_should_get_new
----------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 135138680]]
Processing by UsersController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mRole Load (0.1ms)[0m  SELECT "roles".* FROM "roles"
  Rendered users/_form.html.haml (4.3ms)
Completed 200 OK in 13ms (Views: 10.7ms | ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------
UsersControllerTest: test_should_show_user
------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
Processing by UsersController#show as HTML
  Parameters: {"id"=>"121898072"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Completed 200 OK in 6ms (Views: 3.6ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersControllerTest: test_should_update_user
--------------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 135138680]]
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"email"=>"client@client.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "id"=>"121898072"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRole Load (0.1ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 121898072]]
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (2.1ms)[0m  [1mUPDATE "users" SET "password_digest" = ?, "updated_at" = ? WHERE "users"."id" = 121898072[0m  [["password_digest", "$2a$04$sn5k0YN/z1N5eiPZLerKvuKGUQToBg9QEz2PL8kusDaSDMTe8G8Q2"], ["updated_at", "2014-02-04 16:17:57.510926"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/users/121898072
Completed 302 Found in 13ms (ActiveRecord: 2.5ms)
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[36m (21.2ms)[0m  [1mCREATE TABLE "roles" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (16.3ms)[0m  CREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255), "password_digest" varchar(255), "created_at" datetime, "updated_at" datetime, "role_id" integer) 
  [1m[36m (14.3ms)[0m  [1mCREATE  INDEX "index_users_on_role_id" ON "users" ("role_id")[0m
  [1m[35m (13.5ms)[0m  CREATE TABLE "schema_migrations" ("version" varchar(255) NOT NULL) 
  [1m[36m (14.7ms)[0m  [1mCREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")[0m
  [1m[35m (0.1ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (13.4ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140120134037')[0m
  [1m[35m (12.9ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140120115644')
  [1m[36m (13.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140120114246')[0m
  [1m[35m (13.8ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140120115732')
  [1m[36m (12.9ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140120133118')[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.1ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mDELETE FROM "roles"[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "roles" ("title", "created_at", "updated_at", "id") VALUES ('admin', '2014-02-06 07:58:43', '2014-02-06 07:58:43', 135138680)
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "roles" ("title", "created_at", "updated_at", "id") VALUES ('client', '2014-02-06 07:58:43', '2014-02-06 07:58:43', 121898072)[0m
  [1m[35m (0.1ms)[0m  DELETE FROM "users"
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "id", "role_id") VALUES ('client@client.com', '$2a$10$X19K.DtQmEYX5L71i3P2MuT73HebVUT3Kb4ScriQZ/.oZZazpWgQa', '2014-02-06 07:58:43', '2014-02-06 07:58:43', 121898072, 121898072)[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "id", "role_id") VALUES ('admin@admin.com', '$2a$10$5b2sgJOT/DpIRew5RulrweEvqXm18BH8XsfZRnEtzMHHLdjiEUYXm', '2014-02-06 07:58:43', '2014-02-06 07:58:43', 135138680, 135138680)
  [1m[36m (14.2ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------
RoleTest: test_Role_admin_have_permission_to_create_new_user
------------------------------------------------------------
  [1m[36mRole Load (0.2ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ? LIMIT 1[0m  [["id", 135138680]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------
UserTest: test_should_have_role
-------------------------------
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
  [1m[36mRole Load (0.1ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36mRole Load (0.1ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 121898072]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------
UserTest: test_should_user_can
------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 121898072]]
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------------
UserTest: test_user_email_must_be_certain_format
------------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------
MainControllerTest: test_should_get_index
-----------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
Processing by MainController#index as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 121898072 LIMIT 1[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 121898072]]
  Rendered charts/_game_online.html.haml (7.8ms)
  Rendered main/index.html.haml within layouts/application (11.7ms)
Completed 200 OK in 56ms (Views: 33.1ms | ActiveRecord: 0.2ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
SessionsControllerTest: test_should_fail_login
----------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"client@client.com", "password"=>"[FILTERED]"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."email" = 'client@client.com' LIMIT 1
Redirected to http://test.host/login
Completed 302 Found in 79ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------------
SessionsControllerTest: test_should_get_new
-------------------------------------------
Processing by SessionsController#new as HTML
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" IS NULL LIMIT 1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" IS NULL LIMIT 1
Completed 200 OK in 8ms (Views: 7.6ms | ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
SessionsControllerTest: test_should_login
-----------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"client@client.com", "password"=>"[FILTERED]"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."email" = 'client@client.com' LIMIT 1
Redirected to http://test.host/
Completed 302 Found in 75ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------
SessionsControllerTest: test_should_logout
------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Processing by SessionsController#destroy as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 121898072 LIMIT 1
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 121898072]]
Redirected to http://test.host/login
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersControllerTest: test_should_create_user
--------------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 135138680]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"email"=>"client@client.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 135138680]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "email", "password_digest", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2014-02-06 07:58:43.616175"], ["email", "client@client.com"], ["password_digest", "$2a$04$dZVwnkAxUVLCCghECOw1M.0PmuOmpaJ92Q/cmff9WvAYOIVs5cY6e"], ["updated_at", "2014-02-06 07:58:43.616175"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/users/135138681
Completed 302 Found in 5ms (ActiveRecord: 0.5ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
---------------------------------------------
UsersControllerTest: test_should_destroy_user
---------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Processing by UsersController#destroy as HTML
  Parameters: {"id"=>"121898072"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "users" WHERE "users"."id" = ?  [["id", 121898072]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/users
Completed 302 Found in 2ms (ActiveRecord: 0.5ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------
UsersControllerTest: test_should_get_edit
-----------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
Processing by UsersController#edit as HTML
  Parameters: {"id"=>"121898072"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35mRole Load (0.1ms)[0m  SELECT "roles".* FROM "roles"
  Rendered users/_form.html.haml (11.1ms)
Completed 200 OK in 21ms (Views: 19.9ms | ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------
UsersControllerTest: test_should_get_index
------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
Processing by UsersController#index as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users"[0m
  [1m[35mRole Load (0.1ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 121898072]]
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
Completed 200 OK in 7ms (Views: 6.2ms | ActiveRecord: 0.4ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------
UsersControllerTest: test_should_get_new
----------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36mUser Load (2.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 135138680]]
Processing by UsersController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mRole Load (0.1ms)[0m  SELECT "roles".* FROM "roles"
  Rendered users/_form.html.haml (2.9ms)
Completed 200 OK in 7ms (Views: 5.5ms | ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------
UsersControllerTest: test_should_show_user
------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
Processing by UsersController#show as HTML
  Parameters: {"id"=>"121898072"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Completed 200 OK in 4ms (Views: 2.6ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersControllerTest: test_should_update_user
--------------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 135138680]]
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"email"=>"client@client.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "id"=>"121898072"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 121898072]]
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "users" SET "password_digest" = ?, "updated_at" = ? WHERE "users"."id" = 121898072[0m  [["password_digest", "$2a$04$GhvMi6DKZudmjVD4MN/lnOoX2p2tC15/B6cXtheDYK0frJtnrgnqC"], ["updated_at", "2014-02-06 07:58:43.684125"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/users/121898072
Completed 302 Found in 6ms (ActiveRecord: 0.6ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[36m (22.6ms)[0m  [1mCREATE TABLE "roles" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (15.4ms)[0m  CREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255), "password_digest" varchar(255), "created_at" datetime, "updated_at" datetime, "role_id" integer) 
  [1m[36m (20.1ms)[0m  [1mCREATE  INDEX "index_users_on_role_id" ON "users" ("role_id")[0m
  [1m[35m (15.3ms)[0m  CREATE TABLE "schema_migrations" ("version" varchar(255) NOT NULL) 
  [1m[36m (14.7ms)[0m  [1mCREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")[0m
  [1m[35m (0.1ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (13.7ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140120134037')[0m
  [1m[35m (13.0ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140120115644')
  [1m[36m (14.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140120114246')[0m
  [1m[35m (13.0ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140120115732')
  [1m[36m (13.4ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140120133118')[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.1ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36m (0.3ms)[0m  [1mDELETE FROM "roles"[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "roles" ("title", "created_at", "updated_at", "id") VALUES ('admin', '2014-02-06 08:26:35', '2014-02-06 08:26:35', 135138680)
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "roles" ("title", "created_at", "updated_at", "id") VALUES ('client', '2014-02-06 08:26:35', '2014-02-06 08:26:35', 121898072)[0m
  [1m[35m (0.1ms)[0m  DELETE FROM "users"
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "id", "role_id") VALUES ('client@client.com', '$2a$10$G8fMDNdSGwhW1bwfAC32UuungID5xralAgQcm97kpDa5Scd.grkZe', '2014-02-06 08:26:35', '2014-02-06 08:26:35', 121898072, 121898072)[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "id", "role_id") VALUES ('admin@admin.com', '$2a$10$QbkgYl8pTi4Kxs0bmyqwx.UGzbjE.3sBc0MuHO0yMmmSXPMUiyg0i', '2014-02-06 08:26:35', '2014-02-06 08:26:35', 135138680, 135138680)
  [1m[36m (32.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------
RoleTest: test_Role_admin_have_permission_to_create_new_user
------------------------------------------------------------
  [1m[36mRole Load (0.2ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ? LIMIT 1[0m  [["id", 135138680]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------
UserTest: test_should_have_role
-------------------------------
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
  [1m[36mRole Load (0.1ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 121898072]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------
UserTest: test_should_user_can
------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 121898072]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------------
UserTest: test_user_email_must_be_certain_format
------------------------------------------------
  [1m[35m (1.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------
MainControllerTest: test_should_get_index
-----------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
Processing by MainController#index as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 121898072 LIMIT 1[0m
  [1m[35mRole Load (0.1ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 121898072]]
  Rendered charts/_game_online.html.haml (20.1ms)
  Rendered main/index.html.haml within layouts/application (23.7ms)
Completed 200 OK in 74ms (Views: 47.0ms | ActiveRecord: 0.2ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
SessionsControllerTest: test_should_fail_login
----------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"client@client.com", "password"=>"[FILTERED]"}
  [1m[35mUser Load (4.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."email" = 'client@client.com' LIMIT 1
Redirected to http://test.host/login
Completed 302 Found in 84ms (ActiveRecord: 4.7ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------
SessionsControllerTest: test_should_get_new
-------------------------------------------
Processing by SessionsController#new as HTML
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" IS NULL LIMIT 1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" IS NULL LIMIT 1
Completed 200 OK in 6ms (Views: 5.5ms | ActiveRecord: 0.3ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
SessionsControllerTest: test_should_login
-----------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"client@client.com", "password"=>"[FILTERED]"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."email" = 'client@client.com' LIMIT 1
Redirected to http://test.host/
Completed 302 Found in 76ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------
SessionsControllerTest: test_should_logout
------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Processing by SessionsController#destroy as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 121898072 LIMIT 1
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 121898072]]
Redirected to http://test.host/login
Completed 302 Found in 2ms (ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersControllerTest: test_should_create_user
--------------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 135138680]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"email"=>"client@client.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1[0m
  [1m[35mRole Load (1.6ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 135138680]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "email", "password_digest", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2014-02-06 08:26:35.713818"], ["email", "client@client.com"], ["password_digest", "$2a$04$wqvgeImqrt7/S/MFob5nN.RSWe.YH5yzbKOLyZh9Uh8EEGPrwaGnO"], ["updated_at", "2014-02-06 08:26:35.713818"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/users/135138681
Completed 302 Found in 6ms (ActiveRecord: 2.1ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
---------------------------------------------
UsersControllerTest: test_should_destroy_user
---------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Processing by UsersController#destroy as HTML
  Parameters: {"id"=>"121898072"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "users" WHERE "users"."id" = ?  [["id", 121898072]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/users
Completed 302 Found in 2ms (ActiveRecord: 0.5ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------
UsersControllerTest: test_should_get_edit
-----------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
Processing by UsersController#edit as HTML
  Parameters: {"id"=>"121898072"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35mRole Load (0.1ms)[0m  SELECT "roles".* FROM "roles"
  Rendered users/_form.html.haml (11.2ms)
Completed 200 OK in 22ms (Views: 20.1ms | ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------
UsersControllerTest: test_should_get_index
------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
Processing by UsersController#index as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users"[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 121898072]]
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
Completed 200 OK in 8ms (Views: 6.3ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------
UsersControllerTest: test_should_get_new
----------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 135138680]]
Processing by UsersController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mRole Load (0.1ms)[0m  SELECT "roles".* FROM "roles"
  Rendered users/_form.html.haml (3.1ms)
Completed 200 OK in 11ms (Views: 5.0ms | ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------
UsersControllerTest: test_should_show_user
------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
Processing by UsersController#show as HTML
  Parameters: {"id"=>"121898072"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1[0m
  [1m[35mRole Load (0.1ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Completed 200 OK in 4ms (Views: 2.2ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersControllerTest: test_should_update_user
--------------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 135138680]]
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"email"=>"client@client.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "id"=>"121898072"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 121898072]]
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "users" SET "password_digest" = ?, "updated_at" = ? WHERE "users"."id" = 121898072[0m  [["password_digest", "$2a$04$F5dzdvgncC0jvNhob.nIHeo1acn.BFs5zvmL94Ns1Dn5x3N0eG45C"], ["updated_at", "2014-02-06 08:26:35.783619"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/users/121898072
Completed 302 Found in 6ms (ActiveRecord: 0.5ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[36m (22.2ms)[0m  [1mCREATE TABLE "roles" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (13.8ms)[0m  CREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255), "password_digest" varchar(255), "created_at" datetime, "updated_at" datetime, "role_id" integer) 
  [1m[36m (13.1ms)[0m  [1mCREATE  INDEX "index_users_on_role_id" ON "users" ("role_id")[0m
  [1m[35m (13.8ms)[0m  CREATE TABLE "schema_migrations" ("version" varchar(255) NOT NULL) 
  [1m[36m (13.4ms)[0m  [1mCREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")[0m
  [1m[35m (0.1ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (14.5ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140120134037')[0m
  [1m[35m (12.8ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140120115644')
  [1m[36m (12.8ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140120114246')[0m
  [1m[35m (14.5ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140120115732')
  [1m[36m (13.2ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140120133118')[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.1ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.4ms)[0m  [1mDELETE FROM "roles"[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "roles" ("title", "created_at", "updated_at", "id") VALUES ('admin', '2014-02-06 08:31:53', '2014-02-06 08:31:53', 135138680)
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "roles" ("title", "created_at", "updated_at", "id") VALUES ('client', '2014-02-06 08:31:53', '2014-02-06 08:31:53', 121898072)[0m
  [1m[35m (0.1ms)[0m  DELETE FROM "users"
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "id", "role_id") VALUES ('client@client.com', '$2a$10$Re4ad3/lkrFn4SncCZtyY.8cXl6cEMgOY.tX60JfmyIjfRPj.Kb7i', '2014-02-06 08:31:53', '2014-02-06 08:31:53', 121898072, 121898072)[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "id", "role_id") VALUES ('admin@admin.com', '$2a$10$10OOFzAdEnWcLIH65y/VPe/Ypm/JRyO2.F5niqdxDHlTrvJEJ8rWi', '2014-02-06 08:31:53', '2014-02-06 08:31:53', 135138680, 135138680)
  [1m[36m (13.6ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------
RoleTest: test_Role_admin_have_permission_to_create_new_user
------------------------------------------------------------
  [1m[36mRole Load (0.2ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ? LIMIT 1[0m  [["id", 135138680]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------
UserTest: test_should_have_role
-------------------------------
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
  [1m[36mRole Load (0.1ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 121898072]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------
UserTest: test_should_user_can
------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
  [1m[36mRole Load (0.1ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 121898072]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------------
UserTest: test_user_email_must_be_certain_format
------------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------
MainControllerTest: test_should_get_index
-----------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
Processing by MainController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 121898072 LIMIT 1[0m
  [1m[35mRole Load (0.1ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 121898072]]
  Rendered charts/_game_online.html.haml (28.6ms)
  Rendered main/index.html.haml within layouts/application (32.4ms)
Completed 200 OK in 72ms (Views: 47.0ms | ActiveRecord: 0.2ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
SessionsControllerTest: test_should_fail_login
----------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"client@client.com", "password"=>"[FILTERED]"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."email" = 'client@client.com' LIMIT 1
Redirected to http://test.host/login
Completed 302 Found in 77ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------
SessionsControllerTest: test_should_get_new
-------------------------------------------
Processing by SessionsController#new as HTML
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" IS NULL LIMIT 1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" IS NULL LIMIT 1
Completed 200 OK in 7ms (Views: 6.4ms | ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------
SessionsControllerTest: test_should_login
-----------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"client@client.com", "password"=>"[FILTERED]"}
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."email" = 'client@client.com' LIMIT 1
Redirected to http://test.host/
Completed 302 Found in 79ms (ActiveRecord: 0.5ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------
SessionsControllerTest: test_should_logout
------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Processing by SessionsController#destroy as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 121898072 LIMIT 1
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 121898072]]
Redirected to http://test.host/login
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersControllerTest: test_should_create_user
--------------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 135138680]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"email"=>"client@client.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1[0m
  [1m[35mRole Load (0.4ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 135138680]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "email", "password_digest", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2014-02-06 08:31:54.192071"], ["email", "client@client.com"], ["password_digest", "$2a$04$QvKWCB9vLyPmOnPDJsQp9O.cJEN5V5pBEtRmcyxCrm9Os7D9YgVti"], ["updated_at", "2014-02-06 08:31:54.192071"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/users/135138681
Completed 302 Found in 6ms (ActiveRecord: 0.9ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
---------------------------------------------
UsersControllerTest: test_should_destroy_user
---------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Processing by UsersController#destroy as HTML
  Parameters: {"id"=>"121898072"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "users" WHERE "users"."id" = ?  [["id", 121898072]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/users
Completed 302 Found in 2ms (ActiveRecord: 0.5ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------
UsersControllerTest: test_should_get_edit
-----------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
Processing by UsersController#edit as HTML
  Parameters: {"id"=>"121898072"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (2.3ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35mRole Load (0.1ms)[0m  SELECT "roles".* FROM "roles"
  Rendered users/_form.html.haml (11.9ms)
Completed 200 OK in 23ms (Views: 19.0ms | ActiveRecord: 2.5ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------
UsersControllerTest: test_should_get_index
------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
Processing by UsersController#index as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1[0m
  [1m[35mRole Load (0.2ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users"[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 121898072]]
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
Completed 200 OK in 11ms (Views: 9.4ms | ActiveRecord: 0.5ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------
UsersControllerTest: test_should_get_new
----------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 135138680]]
Processing by UsersController#new as HTML
  [1m[35mUser Load (0.8ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mRole Load (0.1ms)[0m  SELECT "roles".* FROM "roles"
  Rendered users/_form.html.haml (3.9ms)
Completed 200 OK in 8ms (Views: 6.1ms | ActiveRecord: 1.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------
UsersControllerTest: test_should_show_user
------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
Processing by UsersController#show as HTML
  Parameters: {"id"=>"121898072"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Completed 200 OK in 4ms (Views: 2.2ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersControllerTest: test_should_update_user
--------------------------------------------
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 135138680]]
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"email"=>"client@client.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "id"=>"121898072"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 121898072]]
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "users" SET "password_digest" = ?, "updated_at" = ? WHERE "users"."id" = 121898072[0m  [["password_digest", "$2a$04$c5vCHHk3IZX8Jsh52TfaR.dCVUAUdVZSSxycFXxn9wAg6M7enWiCW"], ["updated_at", "2014-02-06 08:31:54.264610"]]
  [1m[35m (3.7ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/users/121898072
Completed 302 Found in 10ms (ActiveRecord: 4.3ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[36m (39.0ms)[0m  [1mCREATE TABLE "roles" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (21.7ms)[0m  CREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255), "password_digest" varchar(255), "created_at" datetime, "updated_at" datetime, "role_id" integer) 
  [1m[36m (20.6ms)[0m  [1mCREATE  INDEX "index_users_on_role_id" ON "users" ("role_id")[0m
  [1m[35m (22.8ms)[0m  CREATE TABLE "schema_migrations" ("version" varchar(255) NOT NULL) 
  [1m[36m (16.6ms)[0m  [1mCREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")[0m
  [1m[35m (0.2ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (16.7ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140120134037')[0m
  [1m[35m (21.8ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140120115644')
  [1m[36m (35.9ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140120114246')[0m
  [1m[35m (18.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140120115732')
  [1m[36m (17.7ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140120133118')[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.1ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36m (0.4ms)[0m  [1mDELETE FROM "roles"[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "roles" ("title", "created_at", "updated_at", "id") VALUES ('admin', '2014-02-06 10:32:35', '2014-02-06 10:32:35', 135138680)
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "roles" ("title", "created_at", "updated_at", "id") VALUES ('client', '2014-02-06 10:32:35', '2014-02-06 10:32:35', 121898072)[0m
  [1m[35m (0.2ms)[0m  DELETE FROM "users"
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "id", "role_id") VALUES ('client@client.com', '$2a$10$oI4MaYF0XyxLZiAI1GdaEuZV/3j3EeQoxRdV1vZEoKi/UOOZxDmUS', '2014-02-06 10:32:35', '2014-02-06 10:32:35', 121898072, 121898072)[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "id", "role_id") VALUES ('admin@admin.com', '$2a$10$.L8qEapO3vdx96ZhyWuC1eXVqRkZxr7s5/8q3jZj.BnYzZciDD9vK', '2014-02-06 10:32:35', '2014-02-06 10:32:35', 135138680, 135138680)
  [1m[36m (22.8ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------
RoleTest: test_Role_admin_have_permission_to_create_new_user
------------------------------------------------------------
  [1m[36mRole Load (0.2ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ? LIMIT 1[0m  [["id", 135138680]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------
UserTest: test_should_have_role
-------------------------------
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
  [1m[36mRole Load (0.1ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 121898072]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------
UserTest: test_should_user_can
------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36mRole Load (0.1ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 121898072]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------------
UserTest: test_user_email_must_be_certain_format
------------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------
MainControllerTest: test_should_get_index
-----------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
Processing by MainController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 121898072 LIMIT 1[0m
  [1m[35mRole Load (0.1ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 121898072]]
  Rendered charts/_game_online.html.haml (1.9ms)
  Rendered main/index.html.haml within layouts/application (18.5ms)
Completed 200 OK in 214ms (Views: 81.3ms | ActiveRecord: 0.2ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
SessionsControllerTest: test_should_fail_login
----------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"client@client.com", "password"=>"[FILTERED]"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."email" = 'client@client.com' LIMIT 1
Redirected to http://test.host/login
Completed 302 Found in 175ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------------
SessionsControllerTest: test_should_get_new
-------------------------------------------
Processing by SessionsController#new as HTML
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" IS NULL LIMIT 1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" IS NULL LIMIT 1
Completed 200 OK in 17ms (Views: 16.4ms | ActiveRecord: 0.2ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
SessionsControllerTest: test_should_login
-----------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"client@client.com", "password"=>"[FILTERED]"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."email" = 'client@client.com' LIMIT 1
Redirected to http://test.host/
Completed 302 Found in 163ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------
SessionsControllerTest: test_should_logout
------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Processing by SessionsController#destroy as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 121898072 LIMIT 1
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 121898072]]
Redirected to http://test.host/login
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersControllerTest: test_should_create_user
--------------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 135138680]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"email"=>"client@client.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1[0m
  [1m[35mRole Load (0.1ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 135138680]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "users" ("created_at", "email", "password_digest", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2014-02-06 10:32:36.573182"], ["email", "client@client.com"], ["password_digest", "$2a$04$rbYEQgyqEeNPhyvNCl1Z/uW8Ll29LXznefyuoKGqkGmsEUJrfNt0K"], ["updated_at", "2014-02-06 10:32:36.573182"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/users/135138681
Completed 302 Found in 11ms (ActiveRecord: 1.2ms)
  [1m[35m (5.8ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
---------------------------------------------
UsersControllerTest: test_should_destroy_user
---------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Processing by UsersController#destroy as HTML
  Parameters: {"id"=>"121898072"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (6.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "users" WHERE "users"."id" = ?  [["id", 121898072]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/users
Completed 302 Found in 9ms (ActiveRecord: 6.8ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
UsersControllerTest: test_should_get_edit
-----------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
Processing by UsersController#edit as HTML
  Parameters: {"id"=>"121898072"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1[0m
  [1m[35mRole Load (0.1ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35mRole Load (0.1ms)[0m  SELECT "roles".* FROM "roles"
  Rendered users/_form.html.haml (32.9ms)
Completed 200 OK in 88ms (Views: 84.0ms | ActiveRecord: 0.4ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------
UsersControllerTest: test_should_get_index
------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
Processing by UsersController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users"[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 121898072]]
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
Completed 200 OK in 29ms (Views: 27.3ms | ActiveRecord: 0.4ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------
UsersControllerTest: test_should_get_new
----------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 135138680]]
Processing by UsersController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mRole Load (0.1ms)[0m  SELECT "roles".* FROM "roles"
  Rendered users/_form.html.haml (4.6ms)
Completed 200 OK in 23ms (Views: 22.0ms | ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------
UsersControllerTest: test_should_show_user
------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
Processing by UsersController#show as HTML
  Parameters: {"id"=>"121898072"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Completed 200 OK in 14ms (Views: 12.3ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersControllerTest: test_should_update_user
--------------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 135138680]]
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"email"=>"client@client.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "id"=>"121898072"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1
  [1m[36mRole Load (0.1ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 121898072]]
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "users" SET "password_digest" = ?, "updated_at" = ? WHERE "users"."id" = 121898072[0m  [["password_digest", "$2a$04$ddijucZut4QsPqGD64h//.6knyE3IWz4uHMQS/WiMnz7GRVMTCmXK"], ["updated_at", "2014-02-06 10:32:36.787360"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/users/121898072
Completed 302 Found in 6ms (ActiveRecord: 0.7ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36m (42.4ms)[0m  [1mCREATE TABLE "roles" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (26.1ms)[0m  CREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255), "password_digest" varchar(255), "created_at" datetime, "updated_at" datetime, "role_id" integer) 
  [1m[36m (79.5ms)[0m  [1mCREATE  INDEX "index_users_on_role_id" ON "users" ("role_id")[0m
  [1m[35m (77.0ms)[0m  CREATE TABLE "schema_migrations" ("version" varchar(255) NOT NULL) 
  [1m[36m (52.5ms)[0m  [1mCREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")[0m
  [1m[35m (0.2ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (126.1ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140120134037')[0m
  [1m[35m (62.2ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140120115644')
  [1m[36m (48.5ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140120114246')[0m
  [1m[35m (44.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140120115732')
  [1m[36m (26.2ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140120133118')[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.1ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.3ms)[0m  [1mDELETE FROM "roles"[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "roles" ("title", "created_at", "updated_at", "id") VALUES ('admin', '2014-02-06 10:37:06', '2014-02-06 10:37:06', 135138680)
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "roles" ("title", "created_at", "updated_at", "id") VALUES ('client', '2014-02-06 10:37:06', '2014-02-06 10:37:06', 121898072)[0m
  [1m[35m (0.1ms)[0m  DELETE FROM "users"
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "id", "role_id") VALUES ('client@client.com', '$2a$10$sQWCezdpLprOeLBlbbQI/OJMBy0HiJrWnDSk9AevB4xZd.J3BcsVG', '2014-02-06 10:37:06', '2014-02-06 10:37:06', 121898072, 121898072)[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "id", "role_id") VALUES ('admin@admin.com', '$2a$10$TzG/aw7VeUurQXl5rT05geo1I8M5PymPMVIT1rP3jaoLRki7NUr.G', '2014-02-06 10:37:06', '2014-02-06 10:37:06', 135138680, 135138680)
  [1m[36m (53.3ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.6ms)[0m  begin transaction
------------------------------------------------------------
RoleTest: test_Role_admin_have_permission_to_create_new_user
------------------------------------------------------------
  [1m[36mRole Load (0.3ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ? LIMIT 1[0m  [["id", 135138680]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------
UserTest: test_should_have_role
-------------------------------
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
  [1m[36mRole Load (0.2ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36mRole Load (0.1ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 121898072]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------
UserTest: test_should_user_can
------------------------------
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
  [1m[36mRole Load (0.1ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36mRole Load (2.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 121898072]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------------
UserTest: test_user_email_must_be_certain_format
------------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------
MainControllerTest: test_should_get_index
-----------------------------------------
  [1m[35mUser Load (1.4ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
Processing by MainController#index as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 121898072 LIMIT 1[0m
  [1m[35mRole Load (0.1ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 121898072]]
  Rendered charts/_game_online.html.haml (2.0ms)
  Rendered main/index.html.haml within layouts/application (24.1ms)
Completed 200 OK in 191ms (Views: 116.0ms | ActiveRecord: 0.2ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
----------------------------------------------
SessionsControllerTest: test_should_fail_login
----------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"client@client.com", "password"=>"[FILTERED]"}
  [1m[35mUser Load (1.5ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."email" = 'client@client.com' LIMIT 1
Redirected to http://test.host/login
Completed 302 Found in 117ms (ActiveRecord: 1.5ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------
SessionsControllerTest: test_should_get_new
-------------------------------------------
Processing by SessionsController#new as HTML
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" IS NULL LIMIT 1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" IS NULL LIMIT 1
Completed 200 OK in 91ms (Views: 90.9ms | ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------
SessionsControllerTest: test_should_login
-----------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"client@client.com", "password"=>"[FILTERED]"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."email" = 'client@client.com' LIMIT 1
Redirected to http://test.host/
Completed 302 Found in 90ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------
SessionsControllerTest: test_should_logout
------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Processing by SessionsController#destroy as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 121898072 LIMIT 1
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 121898072]]
Redirected to http://test.host/login
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[35m (1.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersControllerTest: test_should_create_user
--------------------------------------------
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 135138680]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"email"=>"client@client.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1[0m
  [1m[35mRole Load (3.2ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 135138680]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "email", "password_digest", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2014-02-06 10:37:07.075572"], ["email", "client@client.com"], ["password_digest", "$2a$04$Ea5JT0w58dnokbLgQe5ZjOwVjbkSJnFuu5bYWa84FVr9idj11bcBW"], ["updated_at", "2014-02-06 10:37:07.075572"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/users/135138681
Completed 302 Found in 16ms (ActiveRecord: 4.0ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
UsersControllerTest: test_should_destroy_user
---------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Processing by UsersController#destroy as HTML
  Parameters: {"id"=>"121898072"}
  [1m[35mUser Load (2.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1
  [1m[36mRole Load (0.1ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "users" WHERE "users"."id" = ?  [["id", 121898072]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/users
Completed 302 Found in 13ms (ActiveRecord: 2.7ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
UsersControllerTest: test_should_get_edit
-----------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
Processing by UsersController#edit as HTML
  Parameters: {"id"=>"121898072"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1[0m
  [1m[35mRole Load (0.1ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35mRole Load (0.2ms)[0m  SELECT "roles".* FROM "roles"
  Rendered users/_form.html.haml (130.8ms)
Completed 200 OK in 174ms (Views: 169.4ms | ActiveRecord: 0.4ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------
UsersControllerTest: test_should_get_index
------------------------------------------
  [1m[36mUser Load (2.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
Processing by UsersController#index as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users"[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 121898072]]
  [1m[36mRole Load (0.1ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
Completed 200 OK in 27ms (Views: 25.1ms | ActiveRecord: 0.4ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------
UsersControllerTest: test_should_get_new
----------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 135138680]]
Processing by UsersController#new as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mRole Load (0.7ms)[0m  SELECT "roles".* FROM "roles"
  Rendered users/_form.html.haml (11.4ms)
Completed 200 OK in 33ms (Views: 26.8ms | ActiveRecord: 0.9ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------
UsersControllerTest: test_should_show_user
------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
Processing by UsersController#show as HTML
  Parameters: {"id"=>"121898072"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1[0m
  [1m[35mRole Load (0.1ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Completed 200 OK in 17ms (Views: 11.9ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersControllerTest: test_should_update_user
--------------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36mUser Load (2.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 135138680]]
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"email"=>"client@client.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "id"=>"121898072"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1
  [1m[36mRole Load (1.5ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRole Load (0.1ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 121898072]]
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "users" SET "password_digest" = ?, "updated_at" = ? WHERE "users"."id" = 121898072[0m  [["password_digest", "$2a$04$jBhj/E/h9kilhurgrphHHeqQJF224t0TyNpbl3iX4R5XR0HdWTIqG"], ["updated_at", "2014-02-06 10:37:07.414312"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/users/121898072
Completed 302 Found in 18ms (ActiveRecord: 2.2ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[36m (45.7ms)[0m  [1mCREATE TABLE "roles" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (21.2ms)[0m  CREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255), "password_digest" varchar(255), "created_at" datetime, "updated_at" datetime, "role_id" integer) 
  [1m[36m (15.0ms)[0m  [1mCREATE  INDEX "index_users_on_role_id" ON "users" ("role_id")[0m
  [1m[35m (36.6ms)[0m  CREATE TABLE "schema_migrations" ("version" varchar(255) NOT NULL) 
  [1m[36m (19.7ms)[0m  [1mCREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")[0m
  [1m[35m (0.2ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (22.0ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140120134037')[0m
  [1m[35m (17.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140120115644')
  [1m[36m (28.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140120114246')[0m
  [1m[35m (16.8ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140120115732')
  [1m[36m (20.9ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140120133118')[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.1ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (1.2ms)[0m  [1mDELETE FROM "roles"[0m
  [1m[35m (0.7ms)[0m  INSERT INTO "roles" ("title", "created_at", "updated_at", "id") VALUES ('admin', '2014-02-06 15:43:57', '2014-02-06 15:43:57', 135138680)
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "roles" ("title", "created_at", "updated_at", "id") VALUES ('client', '2014-02-06 15:43:57', '2014-02-06 15:43:57', 121898072)[0m
  [1m[35m (1.2ms)[0m  DELETE FROM "users"
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "id", "role_id") VALUES ('client@client.com', '$2a$10$Dm20GBYy18D...2PX23T2.gsUSy3dILllzKePaLBGEgxFGwiL4Hom', '2014-02-06 15:43:57', '2014-02-06 15:43:57', 121898072, 121898072)[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "id", "role_id") VALUES ('admin@admin.com', '$2a$10$v2/AZeAowB3pxGA.gsKWbeAX7RRFzkAUDA9mhLiyPt0bc6.C1f7Ue', '2014-02-06 15:43:57', '2014-02-06 15:43:57', 135138680, 135138680)
  [1m[36m (24.0ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------
RoleTest: test_Role_admin_have_permission_to_create_new_user
------------------------------------------------------------
  [1m[36mRole Load (0.2ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ? LIMIT 1[0m  [["id", 135138680]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------
UserTest: test_should_have_role
-------------------------------
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
  [1m[36mRole Load (0.1ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36mRole Load (0.1ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 121898072]]
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------
UserTest: test_should_user_can
------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36mRole Load (0.1ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 121898072]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------------
UserTest: test_user_email_must_be_certain_format
------------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------
MainControllerTest: test_should_get_index
-----------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
Processing by MainController#index as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 121898072 LIMIT 1[0m
  [1m[35mRole Load (0.1ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 121898072]]
  Rendered charts/_game_online.html.haml (28.2ms)
  Rendered main/index.html.haml within layouts/application (37.0ms)
Completed 200 OK in 94ms (Views: 61.3ms | ActiveRecord: 0.2ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
SessionsControllerTest: test_should_fail_login
----------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"client@client.com", "password"=>"[FILTERED]"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."email" = 'client@client.com' LIMIT 1
Redirected to http://test.host/login
Completed 302 Found in 80ms (ActiveRecord: 0.2ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------------
SessionsControllerTest: test_should_get_new
-------------------------------------------
Processing by SessionsController#new as HTML
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" IS NULL LIMIT 1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" IS NULL LIMIT 1
Completed 200 OK in 11ms (Views: 10.5ms | ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------
SessionsControllerTest: test_should_login
-----------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"client@client.com", "password"=>"[FILTERED]"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."email" = 'client@client.com' LIMIT 1
Redirected to http://test.host/
Completed 302 Found in 76ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------
SessionsControllerTest: test_should_logout
------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Processing by SessionsController#destroy as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 121898072 LIMIT 1
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 121898072]]
Redirected to http://test.host/login
Completed 302 Found in 2ms (ActiveRecord: 0.1ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersControllerTest: test_should_create_user
--------------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 135138680]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"email"=>"client@client.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 135138680]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (2.3ms)[0m  INSERT INTO "users" ("created_at", "email", "password_digest", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2014-02-06 15:43:58.258408"], ["email", "client@client.com"], ["password_digest", "$2a$04$ty5Qc2fIDGDAUPhvutp7q.CMKdYMDUmS4Shb1Yg2b0HRfLewZUQoq"], ["updated_at", "2014-02-06 15:43:58.258408"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/users/135138681
Completed 302 Found in 9ms (ActiveRecord: 2.5ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
UsersControllerTest: test_should_destroy_user
---------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Processing by UsersController#destroy as HTML
  Parameters: {"id"=>"121898072"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1
  [1m[36mRole Load (0.1ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "users" WHERE "users"."id" = ?  [["id", 121898072]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/users
Completed 302 Found in 7ms (ActiveRecord: 0.7ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
UsersControllerTest: test_should_get_edit
-----------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
Processing by UsersController#edit as HTML
  Parameters: {"id"=>"121898072"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35mRole Load (0.1ms)[0m  SELECT "roles".* FROM "roles"
  Rendered users/_form.html.haml (14.8ms)
Completed 200 OK in 25ms (Views: 22.3ms | ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------
UsersControllerTest: test_should_get_index
------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
Processing by UsersController#index as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users"[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 121898072]]
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
Completed 200 OK in 9ms (Views: 7.1ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------
UsersControllerTest: test_should_get_new
----------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 135138680]]
Processing by UsersController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1
  [1m[36mRole Load (0.1ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mRole Load (0.1ms)[0m  SELECT "roles".* FROM "roles"
  Rendered users/_form.html.haml (3.0ms)
Completed 200 OK in 7ms (Views: 5.9ms | ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------
UsersControllerTest: test_should_show_user
------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
Processing by UsersController#show as HTML
  Parameters: {"id"=>"121898072"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Completed 200 OK in 4ms (Views: 2.3ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersControllerTest: test_should_update_user
--------------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 135138680]]
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"email"=>"client@client.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "id"=>"121898072"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1
  [1m[36mRole Load (0.1ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRole Load (0.1ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 121898072]]
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mUPDATE "users" SET "password_digest" = ?, "updated_at" = ? WHERE "users"."id" = 121898072[0m  [["password_digest", "$2a$04$aLtgkpVgpcGh2AyEMJ/TJ.7fVeqL9Wx9GRTBe5jA3MpGkfvlFyrHG"], ["updated_at", "2014-02-06 15:43:58.364651"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/users/121898072
Completed 302 Found in 13ms (ActiveRecord: 1.5ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[36m (50.8ms)[0m  [1mCREATE TABLE "roles" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (34.4ms)[0m  CREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255), "password_digest" varchar(255), "created_at" datetime, "updated_at" datetime, "role_id" integer) 
  [1m[36m (21.9ms)[0m  [1mCREATE  INDEX "index_users_on_role_id" ON "users" ("role_id")[0m
  [1m[35m (28.5ms)[0m  CREATE TABLE "schema_migrations" ("version" varchar(255) NOT NULL) 
  [1m[36m (29.3ms)[0m  [1mCREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")[0m
  [1m[35m (0.1ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (20.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140120134037')[0m
  [1m[35m (30.1ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140120115644')
  [1m[36m (16.5ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140120114246')[0m
  [1m[35m (24.7ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140120115732')
  [1m[36m (26.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140120133118')[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.1ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36m (2.1ms)[0m  [1mDELETE FROM "roles"[0m
  [1m[35m (1.1ms)[0m  INSERT INTO "roles" ("title", "created_at", "updated_at", "id") VALUES ('admin', '2014-02-06 16:18:23', '2014-02-06 16:18:23', 135138680)
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "roles" ("title", "created_at", "updated_at", "id") VALUES ('client', '2014-02-06 16:18:23', '2014-02-06 16:18:23', 121898072)[0m
  [1m[35m (2.0ms)[0m  DELETE FROM "users"
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "id", "role_id") VALUES ('client@client.com', '$2a$10$TxFS6Nh1pJuLXUjBa.5ZKeeYXPGYLG1toakFSj4aK8XgPhyp.pvF.', '2014-02-06 16:18:23', '2014-02-06 16:18:23', 121898072, 121898072)[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "id", "role_id") VALUES ('admin@admin.com', '$2a$10$MfyNzyznpHMNqzBaFVi3ouDcxDA.1YE2SGTvJZBQRo6Pm10ztJqc.', '2014-02-06 16:18:23', '2014-02-06 16:18:23', 135138680, 135138680)
  [1m[36m (23.3ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------
RoleTest: test_Role_admin_have_permission_to_create_new_user
------------------------------------------------------------
  [1m[36mRole Load (0.2ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ? LIMIT 1[0m  [["id", 135138680]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------
UserTest: test_should_have_role
-------------------------------
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
  [1m[36mRole Load (0.1ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 121898072]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------
UserTest: test_should_user_can
------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
  [1m[36mRole Load (0.1ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36mRole Load (1.3ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 121898072]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------------
UserTest: test_user_email_must_be_certain_format
------------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------
MainControllerTest: test_should_get_index
-----------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
Processing by MainController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 121898072 LIMIT 1[0m
  [1m[35mRole Load (0.1ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 121898072]]
  Rendered charts/_game_online.html.haml (24.5ms)
  Rendered main/index.html.haml within layouts/application (34.3ms)
Completed 200 OK in 134ms (Views: 61.8ms | ActiveRecord: 0.2ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
SessionsControllerTest: test_should_fail_login
----------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"client@client.com", "password"=>"[FILTERED]"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."email" = 'client@client.com' LIMIT 1
Redirected to http://test.host/login
Completed 302 Found in 76ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------------
SessionsControllerTest: test_should_get_new
-------------------------------------------
Processing by SessionsController#new as HTML
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" IS NULL LIMIT 1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" IS NULL LIMIT 1
Completed 200 OK in 11ms (Views: 10.8ms | ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------
SessionsControllerTest: test_should_login
-----------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"client@client.com", "password"=>"[FILTERED]"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."email" = 'client@client.com' LIMIT 1
Redirected to http://test.host/
Completed 302 Found in 80ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------
SessionsControllerTest: test_should_logout
------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Processing by SessionsController#destroy as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 121898072 LIMIT 1
  [1m[36mRole Load (1.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 121898072]]
Redirected to http://test.host/login
Completed 302 Found in 3ms (ActiveRecord: 1.1ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersControllerTest: test_should_create_user
--------------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 135138680]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"email"=>"client@client.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1[0m
  [1m[35mRole Load (0.1ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 135138680]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (4.6ms)[0m  INSERT INTO "users" ("created_at", "email", "password_digest", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2014-02-06 16:18:23.834036"], ["email", "client@client.com"], ["password_digest", "$2a$04$6U.ESLvL29lGxELRPF1yCuIrwkw/Kh9a/MTAIhHcqwOVH4LAOSDR2"], ["updated_at", "2014-02-06 16:18:23.834036"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/users/135138681
Completed 302 Found in 19ms (ActiveRecord: 5.1ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
---------------------------------------------
UsersControllerTest: test_should_destroy_user
---------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Processing by UsersController#destroy as HTML
  Parameters: {"id"=>"121898072"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.9ms)[0m  DELETE FROM "users" WHERE "users"."id" = ?  [["id", 121898072]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/users
Completed 302 Found in 8ms (ActiveRecord: 3.2ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (2.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------
UsersControllerTest: test_should_get_edit
-----------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
Processing by UsersController#edit as HTML
  Parameters: {"id"=>"121898072"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35mRole Load (0.1ms)[0m  SELECT "roles".* FROM "roles"
  Rendered users/_form.html.haml (12.3ms)
Completed 200 OK in 23ms (Views: 21.1ms | ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------
UsersControllerTest: test_should_get_index
------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
Processing by UsersController#index as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users"[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 121898072]]
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
Completed 200 OK in 11ms (Views: 8.9ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------
UsersControllerTest: test_should_get_new
----------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 135138680]]
Processing by UsersController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mRole Load (0.2ms)[0m  SELECT "roles".* FROM "roles"
  Rendered users/_form.html.haml (6.2ms)
Completed 200 OK in 14ms (Views: 11.5ms | ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------
UsersControllerTest: test_should_show_user
------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
Processing by UsersController#show as HTML
  Parameters: {"id"=>"121898072"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Completed 200 OK in 5ms (Views: 2.5ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersControllerTest: test_should_update_user
--------------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 135138680]]
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"email"=>"client@client.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "id"=>"121898072"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 121898072]]
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (2.0ms)[0m  [1mUPDATE "users" SET "password_digest" = ?, "updated_at" = ? WHERE "users"."id" = 121898072[0m  [["password_digest", "$2a$04$U7AbvUKUdxxBsma74hkDHuM/ofO8Pb5xcMkf3q0liPypcfgbTtUDu"], ["updated_at", "2014-02-06 16:18:23.957269"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/users/121898072
Completed 302 Found in 14ms (ActiveRecord: 2.4ms)
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[36m (39.1ms)[0m  [1mCREATE TABLE "roles" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (32.6ms)[0m  CREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255), "password_digest" varchar(255), "created_at" datetime, "updated_at" datetime, "role_id" integer) 
  [1m[36m (20.7ms)[0m  [1mCREATE  INDEX "index_users_on_role_id" ON "users" ("role_id")[0m
  [1m[35m (21.5ms)[0m  CREATE TABLE "schema_migrations" ("version" varchar(255) NOT NULL) 
  [1m[36m (21.8ms)[0m  [1mCREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")[0m
  [1m[35m (0.1ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (32.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140120134037')[0m
  [1m[35m (18.7ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140120115644')
  [1m[36m (17.9ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140120114246')[0m
  [1m[35m (17.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140120115732')
  [1m[36m (28.9ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140120133118')[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.1ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36m (2.0ms)[0m  [1mDELETE FROM "roles"[0m
  [1m[35m (1.2ms)[0m  INSERT INTO "roles" ("title", "created_at", "updated_at", "id") VALUES ('admin', '2014-02-07 08:58:25', '2014-02-07 08:58:25', 135138680)
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "roles" ("title", "created_at", "updated_at", "id") VALUES ('client', '2014-02-07 08:58:25', '2014-02-07 08:58:25', 121898072)[0m
  [1m[35m (2.6ms)[0m  DELETE FROM "users"
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "id", "role_id") VALUES ('client@client.com', '$2a$10$4AC0Cc.Tb8qYg4iuV6slduEpN6HUyIOVL.epgiqJdLQ/bXlMF1W7K', '2014-02-07 08:58:25', '2014-02-07 08:58:25', 121898072, 121898072)[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "id", "role_id") VALUES ('admin@admin.com', '$2a$10$PX3nJ7N2FhKnCGn021aWfO5RaMwhCyJKAsgozNbxGeTM0d.DkFPG2', '2014-02-07 08:58:25', '2014-02-07 08:58:25', 135138680, 135138680)
  [1m[36m (26.3ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------
RoleTest: test_Role_admin_have_permission_to_create_new_user
------------------------------------------------------------
  [1m[36mRole Load (0.3ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ? LIMIT 1[0m  [["id", 135138680]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------
UserTest: test_should_have_role
-------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
  [1m[36mRole Load (0.1ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 121898072]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------
UserTest: test_should_user_can
------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
  [1m[36mRole Load (0.1ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 121898072]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------
UserTest: test_user_email_must_be_certain_format
------------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------
MainControllerTest: test_should_get_index
-----------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
Processing by MainController#index as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 121898072 LIMIT 1[0m
  [1m[35mRole Load (0.1ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 121898072]]
  Rendered charts/_game_online.html.haml (35.6ms)
  Rendered main/index.html.haml within layouts/application (40.4ms)
Completed 200 OK in 1896ms (Views: 1872.5ms | ActiveRecord: 0.2ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
SessionsControllerTest: test_should_fail_login
----------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"client@client.com", "password"=>"[FILTERED]"}
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."email" = 'client@client.com' LIMIT 1
Redirected to http://test.host/login
Completed 302 Found in 83ms (ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------
SessionsControllerTest: test_should_get_new
-------------------------------------------
Processing by SessionsController#new as HTML
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" IS NULL LIMIT 1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" IS NULL LIMIT 1
Completed 200 OK in 21ms (Views: 20.4ms | ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
SessionsControllerTest: test_should_login
-----------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"client@client.com", "password"=>"[FILTERED]"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."email" = 'client@client.com' LIMIT 1
Redirected to http://test.host/
Completed 302 Found in 82ms (ActiveRecord: 0.2ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
------------------------------------------
SessionsControllerTest: test_should_logout
------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Processing by SessionsController#destroy as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 121898072 LIMIT 1
  [1m[36mRole Load (0.1ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 121898072]]
Redirected to http://test.host/login
Completed 302 Found in 4ms (ActiveRecord: 0.4ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersControllerTest: test_should_create_user
--------------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 135138680]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"email"=>"client@client.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 135138680]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (3.9ms)[0m  INSERT INTO "users" ("created_at", "email", "password_digest", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2014-02-07 08:58:27.354978"], ["email", "client@client.com"], ["password_digest", "$2a$04$y.QTmDAczq2Cm8kKMIM/ge2HtIlzwy55mo3H8FNgeiuJZEgGAx7wm"], ["updated_at", "2014-02-07 08:58:27.354978"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/users/135138681
Completed 302 Found in 15ms (ActiveRecord: 4.3ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
---------------------------------------------
UsersControllerTest: test_should_destroy_user
---------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Processing by UsersController#destroy as HTML
  Parameters: {"id"=>"121898072"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.9ms)[0m  DELETE FROM "users" WHERE "users"."id" = ?  [["id", 121898072]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/users
Completed 302 Found in 11ms (ActiveRecord: 3.2ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
UsersControllerTest: test_should_get_edit
-----------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
Processing by UsersController#edit as HTML
  Parameters: {"id"=>"121898072"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1[0m
  [1m[35mRole Load (0.1ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35mRole Load (0.2ms)[0m  SELECT "roles".* FROM "roles"
  Rendered users/_form.html.haml (25.9ms)
Completed 200 OK in 50ms (Views: 45.6ms | ActiveRecord: 0.5ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------
UsersControllerTest: test_should_get_index
------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
Processing by UsersController#index as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users"[0m
  [1m[35mRole Load (0.2ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 121898072]]
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
Completed 200 OK in 30ms (Views: 27.0ms | ActiveRecord: 0.6ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------
UsersControllerTest: test_should_get_new
----------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 135138680]]
Processing by UsersController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mRole Load (0.1ms)[0m  SELECT "roles".* FROM "roles"
  Rendered users/_form.html.haml (4.3ms)
Completed 200 OK in 11ms (Views: 8.7ms | ActiveRecord: 0.2ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
UsersControllerTest: test_should_route_to_users
-----------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------
UsersControllerTest: test_should_show_user
------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
Processing by UsersController#show as HTML
  Parameters: {"id"=>"121898072"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Completed 200 OK in 6ms (Views: 3.3ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersControllerTest: test_should_update_user
--------------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 135138680]]
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"email"=>"client@client.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "id"=>"121898072"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 121898072]]
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (5.2ms)[0m  [1mUPDATE "users" SET "password_digest" = ?, "updated_at" = ? WHERE "users"."id" = 121898072[0m  [["password_digest", "$2a$04$AHiYndl/7FNndfPzKnAPPue3uJCX7./mycKeS8H1TMsoyewLotIn2"], ["updated_at", "2014-02-07 08:58:27.530034"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/users/121898072
Completed 302 Found in 14ms (ActiveRecord: 5.7ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[36m (60.7ms)[0m  [1mCREATE TABLE "roles" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (19.7ms)[0m  CREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255), "password_digest" varchar(255), "created_at" datetime, "updated_at" datetime, "role_id" integer) 
  [1m[36m (23.4ms)[0m  [1mCREATE  INDEX "index_users_on_role_id" ON "users" ("role_id")[0m
  [1m[35m (38.8ms)[0m  CREATE TABLE "schema_migrations" ("version" varchar(255) NOT NULL) 
  [1m[36m (26.0ms)[0m  [1mCREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")[0m
  [1m[35m (0.1ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (18.1ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140120134037')[0m
  [1m[35m (25.7ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140120115644')
  [1m[36m (18.4ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140120114246')[0m
  [1m[35m (19.5ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140120115732')
  [1m[36m (34.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140120133118')[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.1ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (2.4ms)[0m  [1mDELETE FROM "roles"[0m
  [1m[35m (1.1ms)[0m  INSERT INTO "roles" ("title", "created_at", "updated_at", "id") VALUES ('admin', '2014-02-07 09:00:41', '2014-02-07 09:00:41', 135138680)
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "roles" ("title", "created_at", "updated_at", "id") VALUES ('client', '2014-02-07 09:00:41', '2014-02-07 09:00:41', 121898072)[0m
  [1m[35m (2.1ms)[0m  DELETE FROM "users"
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "id", "role_id") VALUES ('client@client.com', '$2a$10$9uHmLi11Cfx4RxrlnQTKneCwv1yOzpaVYhiQey1ybZIC2hT5t9Bm.', '2014-02-07 09:00:41', '2014-02-07 09:00:41', 121898072, 121898072)[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "id", "role_id") VALUES ('admin@admin.com', '$2a$10$mRkgkrKKkyK5ZkUGa6cD2OR5VC5wcWd0ZYf./Q/euzGEWBzVWAsP2', '2014-02-07 09:00:41', '2014-02-07 09:00:41', 135138680, 135138680)
  [1m[36m (20.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------
RoleTest: test_Role_admin_have_permission_to_create_new_user
------------------------------------------------------------
  [1m[36mRole Load (0.2ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ? LIMIT 1[0m  [["id", 135138680]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------
UserTest: test_should_have_role
-------------------------------
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
  [1m[36mRole Load (0.9ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36mRole Load (0.1ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 121898072]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------
UserTest: test_should_user_can
------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 121898072]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------
UserTest: test_user_email_must_be_certain_format
------------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------
MainControllerTest: test_should_get_index
-----------------------------------------
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
Processing by MainController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 121898072 LIMIT 1[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 121898072]]
  Rendered charts/_game_online.html.haml (27.8ms)
  Rendered main/index.html.haml within layouts/application (45.6ms)
Completed 200 OK in 151ms (Views: 108.0ms | ActiveRecord: 0.2ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
SessionsControllerTest: test_should_fail_login
----------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"client@client.com", "password"=>"[FILTERED]"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."email" = 'client@client.com' LIMIT 1
Redirected to http://test.host/login
Completed 302 Found in 84ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------
SessionsControllerTest: test_should_get_new
-------------------------------------------
Processing by SessionsController#new as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" IS NULL LIMIT 1[0m
  [1m[35mUser Load (1.6ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" IS NULL LIMIT 1
Completed 200 OK in 9ms (Views: 7.1ms | ActiveRecord: 1.7ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------
SessionsControllerTest: test_should_login
-----------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"client@client.com", "password"=>"[FILTERED]"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."email" = 'client@client.com' LIMIT 1
Redirected to http://test.host/
Completed 302 Found in 78ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------
SessionsControllerTest: test_should_logout
------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Processing by SessionsController#destroy as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 121898072 LIMIT 1
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 121898072]]
Redirected to http://test.host/login
Completed 302 Found in 3ms (ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersControllerTest: test_should_create_user
--------------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 135138680]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"email"=>"client@client.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1[0m
  [1m[35mRole Load (0.1ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 135138680]]
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (4.6ms)[0m  INSERT INTO "users" ("created_at", "email", "password_digest", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2014-02-07 09:00:41.857348"], ["email", "client@client.com"], ["password_digest", "$2a$04$8TATcByV7iju/ICmhfyUiObyarYMH6wI2k.5qoaeoW3jufdUApZ06"], ["updated_at", "2014-02-07 09:00:41.857348"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/users/135138681
Completed 302 Found in 11ms (ActiveRecord: 5.3ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
---------------------------------------------
UsersControllerTest: test_should_destroy_user
---------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Processing by UsersController#destroy as HTML
  Parameters: {"id"=>"121898072"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (3.5ms)[0m  DELETE FROM "users" WHERE "users"."id" = ?  [["id", 121898072]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/users
Completed 302 Found in 8ms (ActiveRecord: 3.7ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------
UsersControllerTest: test_should_get_edit
-----------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
Processing by UsersController#edit as HTML
  Parameters: {"id"=>"121898072"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1[0m
  [1m[35mRole Load (0.1ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35mRole Load (0.1ms)[0m  SELECT "roles".* FROM "roles"
  Rendered users/_form.html.haml (12.6ms)
Completed 200 OK in 25ms (Views: 22.9ms | ActiveRecord: 0.4ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------
UsersControllerTest: test_should_get_index
------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
Processing by UsersController#index as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1[0m
  [1m[35mRole Load (0.1ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users"[0m
  [1m[35mRole Load (0.1ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 121898072]]
  [1m[36mRole Load (0.1ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
Completed 200 OK in 12ms (Views: 9.8ms | ActiveRecord: 0.5ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
----------------------------------------
UsersControllerTest: test_should_get_new
----------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 135138680]]
Processing by UsersController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mRole Load (0.1ms)[0m  SELECT "roles".* FROM "roles"
  Rendered users/_form.html.haml (4.2ms)
Completed 200 OK in 10ms (Views: 7.7ms | ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------------
UsersControllerTest: test_should_route_to_users
-----------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------
UsersControllerTest: test_should_show_user
------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
Processing by UsersController#show as HTML
  Parameters: {"id"=>"121898072"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Completed 200 OK in 9ms (Views: 6.2ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersControllerTest: test_should_update_user
--------------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 135138680]]
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"email"=>"client@client.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "id"=>"121898072"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 121898072]]
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (4.9ms)[0m  [1mUPDATE "users" SET "password_digest" = ?, "updated_at" = ? WHERE "users"."id" = 121898072[0m  [["password_digest", "$2a$04$aWD62JuZnrvEDMaset25juj8RknU6snGvwkUZ6zaOh1hqEygdpx2u"], ["updated_at", "2014-02-07 09:00:41.981683"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/users/121898072
Completed 302 Found in 14ms (ActiveRecord: 5.2ms)
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[36m (45.9ms)[0m  [1mCREATE TABLE "roles" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (22.2ms)[0m  CREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255), "password_digest" varchar(255), "created_at" datetime, "updated_at" datetime, "role_id" integer) 
  [1m[36m (24.5ms)[0m  [1mCREATE  INDEX "index_users_on_role_id" ON "users" ("role_id")[0m
  [1m[35m (44.7ms)[0m  CREATE TABLE "schema_migrations" ("version" varchar(255) NOT NULL) 
  [1m[36m (22.5ms)[0m  [1mCREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")[0m
  [1m[35m (0.1ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (28.0ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140120134037')[0m
  [1m[35m (39.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140120115644')
  [1m[36m (16.8ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140120114246')[0m
  [1m[35m (22.4ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140120115732')
  [1m[36m (26.1ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140120133118')[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.1ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36m (2.0ms)[0m  [1mDELETE FROM "roles"[0m
  [1m[35m (1.1ms)[0m  INSERT INTO "roles" ("title", "created_at", "updated_at", "id") VALUES ('admin', '2014-02-07 09:01:19', '2014-02-07 09:01:19', 135138680)
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "roles" ("title", "created_at", "updated_at", "id") VALUES ('client', '2014-02-07 09:01:19', '2014-02-07 09:01:19', 121898072)[0m
  [1m[35m (2.0ms)[0m  DELETE FROM "users"
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "id", "role_id") VALUES ('client@client.com', '$2a$10$.DBGexznUG5VX3w0AtoNxeHqIoKZhrl1dyQqFnGPLKosQe94IgNyW', '2014-02-07 09:01:19', '2014-02-07 09:01:19', 121898072, 121898072)[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "id", "role_id") VALUES ('admin@admin.com', '$2a$10$FcRMJ4kzMV1LhyiLkGj3guNPRe0LsOxir8z4CZJi6NpZzxIzyNOWG', '2014-02-07 09:01:19', '2014-02-07 09:01:19', 135138680, 135138680)
  [1m[36m (49.5ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------
RoleTest: test_Role_admin_have_permission_to_create_new_user
------------------------------------------------------------
  [1m[36mRole Load (0.4ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ? LIMIT 1[0m  [["id", 135138680]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------
UserTest: test_should_have_role
-------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
  [1m[36mRole Load (0.1ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 121898072]]
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------
UserTest: test_should_user_can
------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36mRole Load (4.2ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 121898072]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------------
UserTest: test_user_email_must_be_certain_format
------------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------
MainControllerTest: test_should_get_index
-----------------------------------------
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
Processing by MainController#index as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 121898072 LIMIT 1[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 121898072]]
  Rendered charts/_game_online.html.haml (22.5ms)
  Rendered main/index.html.haml within layouts/application (26.8ms)
Completed 200 OK in 121ms (Views: 95.2ms | ActiveRecord: 0.2ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
SessionsControllerTest: test_should_fail_login
----------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"client@client.com", "password"=>"[FILTERED]"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."email" = 'client@client.com' LIMIT 1
Redirected to http://test.host/login
Completed 302 Found in 83ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------------
SessionsControllerTest: test_should_get_new
-------------------------------------------
Processing by SessionsController#new as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" IS NULL LIMIT 1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" IS NULL LIMIT 1
Completed 200 OK in 8ms (Views: 7.4ms | ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------
SessionsControllerTest: test_should_login
-----------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"client@client.com", "password"=>"[FILTERED]"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."email" = 'client@client.com' LIMIT 1
Redirected to http://test.host/
Completed 302 Found in 78ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------
SessionsControllerTest: test_should_logout
------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Processing by SessionsController#destroy as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 121898072 LIMIT 1
  [1m[36mRole Load (0.1ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 121898072]]
Redirected to http://test.host/login
Completed 302 Found in 3ms (ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersControllerTest: test_should_create_user
--------------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 135138680]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"email"=>"client@client.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 135138680]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (3.4ms)[0m  INSERT INTO "users" ("created_at", "email", "password_digest", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2014-02-07 09:01:19.586956"], ["email", "client@client.com"], ["password_digest", "$2a$04$iNi6SkR2PSrZ9ddacxTNFuPqYs/ii9LSctCY/oNdZfDb6UKzld3M6"], ["updated_at", "2014-02-07 09:01:19.586956"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/users/135138681
Completed 302 Found in 17ms (ActiveRecord: 3.9ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
---------------------------------------------
UsersControllerTest: test_should_destroy_user
---------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Processing by UsersController#destroy as HTML
  Parameters: {"id"=>"121898072"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.9ms)[0m  DELETE FROM "users" WHERE "users"."id" = ?  [["id", 121898072]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/users
Completed 302 Found in 8ms (ActiveRecord: 3.2ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
UsersControllerTest: test_should_get_edit
-----------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
Processing by UsersController#edit as HTML
  Parameters: {"id"=>"121898072"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35mRole Load (0.1ms)[0m  SELECT "roles".* FROM "roles"
  Rendered users/_form.html.haml (12.0ms)
Completed 200 OK in 23ms (Views: 19.9ms | ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------
UsersControllerTest: test_should_get_index
------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
Processing by UsersController#index as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users"[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 121898072]]
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
Completed 200 OK in 13ms (Views: 11.1ms | ActiveRecord: 0.4ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------
UsersControllerTest: test_should_get_new
----------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 135138680]]
Processing by UsersController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1
  [1m[36mRole Load (0.1ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mRole Load (0.1ms)[0m  SELECT "roles".* FROM "roles"
  Rendered users/_form.html.haml (6.1ms)
Completed 200 OK in 12ms (Views: 10.3ms | ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------------
UsersControllerTest: test_should_route_to_users
-----------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.4ms)[0m  begin transaction
------------------------------------------
UsersControllerTest: test_should_show_user
------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
Processing by UsersController#show as HTML
  Parameters: {"id"=>"121898072"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1[0m
  [1m[35mRole Load (0.1ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Completed 200 OK in 18ms (Views: 11.4ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersControllerTest: test_should_update_user
--------------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 135138680]]
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"email"=>"client@client.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "id"=>"121898072"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1
  [1m[36mRole Load (0.1ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRole Load (0.1ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 121898072]]
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (4.4ms)[0m  [1mUPDATE "users" SET "password_digest" = ?, "updated_at" = ? WHERE "users"."id" = 121898072[0m  [["password_digest", "$2a$04$CQ5F.SKFU232YYGiQ6Sun.IGy3NYRmKXU4NXzLn37Hm6bGQ1YRPzi"], ["updated_at", "2014-02-07 09:01:19.828354"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/users/121898072
Completed 302 Found in 18ms (ActiveRecord: 4.8ms)
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[36m (29.1ms)[0m  [1mCREATE TABLE "roles" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (35.0ms)[0m  CREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255), "password_digest" varchar(255), "created_at" datetime, "updated_at" datetime, "role_id" integer) 
  [1m[36m (26.7ms)[0m  [1mCREATE  INDEX "index_users_on_role_id" ON "users" ("role_id")[0m
  [1m[35m (20.8ms)[0m  CREATE TABLE "schema_migrations" ("version" varchar(255) NOT NULL) 
  [1m[36m (17.8ms)[0m  [1mCREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")[0m
  [1m[35m (0.1ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (46.0ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140120134037')[0m
  [1m[35m (18.1ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140120115644')
  [1m[36m (19.2ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140120114246')[0m
  [1m[35m (31.7ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140120115732')
  [1m[36m (18.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140120133118')[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.1ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (1.8ms)[0m  [1mDELETE FROM "roles"[0m
  [1m[35m (1.1ms)[0m  INSERT INTO "roles" ("title", "created_at", "updated_at", "id") VALUES ('admin', '2014-02-07 09:01:46', '2014-02-07 09:01:46', 135138680)
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "roles" ("title", "created_at", "updated_at", "id") VALUES ('client', '2014-02-07 09:01:46', '2014-02-07 09:01:46', 121898072)[0m
  [1m[35m (2.0ms)[0m  DELETE FROM "users"
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "id", "role_id") VALUES ('client@client.com', '$2a$10$tWrfgfCCs3PAMdxJNMeu1.i/NI4nFmnGdDdikO03EdfEc1Zt6cjmS', '2014-02-07 09:01:46', '2014-02-07 09:01:46', 121898072, 121898072)[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "id", "role_id") VALUES ('admin@admin.com', '$2a$10$QH2I5dSdA.tDEHpx8ujgqOWz32Clh77vYjx3cMRxf.JyQELEW6l4K', '2014-02-07 09:01:46', '2014-02-07 09:01:46', 135138680, 135138680)
  [1m[36m (21.9ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------
RoleTest: test_Role_admin_have_permission_to_create_new_user
------------------------------------------------------------
  [1m[36mRole Load (0.2ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ? LIMIT 1[0m  [["id", 135138680]]
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------
UserTest: test_should_have_role
-------------------------------
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
  [1m[36mRole Load (0.1ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 121898072]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------
UserTest: test_should_user_can
------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 121898072]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------------
UserTest: test_user_email_must_be_certain_format
------------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------
MainControllerTest: test_should_get_index
-----------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
Processing by MainController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 121898072 LIMIT 1[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 121898072]]
  Rendered charts/_game_online.html.haml (18.9ms)
  Rendered main/index.html.haml within layouts/application (32.8ms)
Completed 200 OK in 124ms (Views: 97.5ms | ActiveRecord: 0.3ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
SessionsControllerTest: test_should_fail_login
----------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"client@client.com", "password"=>"[FILTERED]"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."email" = 'client@client.com' LIMIT 1
Redirected to http://test.host/login
Completed 302 Found in 83ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------
SessionsControllerTest: test_should_get_new
-------------------------------------------
Processing by SessionsController#new as HTML
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" IS NULL LIMIT 1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" IS NULL LIMIT 1
Completed 200 OK in 10ms (Views: 9.8ms | ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
SessionsControllerTest: test_should_login
-----------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"client@client.com", "password"=>"[FILTERED]"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."email" = 'client@client.com' LIMIT 1
Redirected to http://test.host/
Completed 302 Found in 77ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------
SessionsControllerTest: test_should_logout
------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Processing by SessionsController#destroy as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 121898072 LIMIT 1
  [1m[36mRole Load (0.1ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 121898072]]
Redirected to http://test.host/login
Completed 302 Found in 2ms (ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersControllerTest: test_should_create_user
--------------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 135138680]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"email"=>"client@client.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 135138680]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (5.5ms)[0m  INSERT INTO "users" ("created_at", "email", "password_digest", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2014-02-07 09:01:46.669698"], ["email", "client@client.com"], ["password_digest", "$2a$04$um1qtDMwqToP6mvtNbSDI.Z.jwjOjLKnxlwpM.LO/2i7NDSPtWHUW"], ["updated_at", "2014-02-07 09:01:46.669698"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/users/135138681
Completed 302 Found in 11ms (ActiveRecord: 5.8ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
UsersControllerTest: test_should_destroy_user
---------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Processing by UsersController#destroy as HTML
  Parameters: {"id"=>"121898072"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1
  [1m[36mRole Load (0.1ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.8ms)[0m  DELETE FROM "users" WHERE "users"."id" = ?  [["id", 121898072]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/users
Completed 302 Found in 8ms (ActiveRecord: 3.1ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------
UsersControllerTest: test_should_get_edit
-----------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
Processing by UsersController#edit as HTML
  Parameters: {"id"=>"121898072"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1[0m
  [1m[35mRole Load (0.1ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35mRole Load (0.3ms)[0m  SELECT "roles".* FROM "roles"
  Rendered users/_form.html.haml (11.4ms)
Completed 200 OK in 25ms (Views: 22.2ms | ActiveRecord: 0.5ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------
UsersControllerTest: test_should_get_index
------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
Processing by UsersController#index as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users"[0m
  [1m[35mRole Load (0.1ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 121898072]]
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
Completed 200 OK in 12ms (Views: 9.7ms | ActiveRecord: 0.4ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------
UsersControllerTest: test_should_get_new
----------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 135138680]]
Processing by UsersController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mRole Load (0.1ms)[0m  SELECT "roles".* FROM "roles"
  Rendered users/_form.html.haml (4.1ms)
Completed 200 OK in 10ms (Views: 7.7ms | ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------------
UsersControllerTest: test_should_route_to_users
-----------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------
UsersControllerTest: test_should_show_user
------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
Processing by UsersController#show as HTML
  Parameters: {"id"=>"121898072"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Completed 200 OK in 6ms (Views: 3.2ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersControllerTest: test_should_update_user
--------------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 135138680]]
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"email"=>"client@client.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "id"=>"121898072"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRole Load (0.1ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 121898072]]
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.8ms)[0m  [1mUPDATE "users" SET "password_digest" = ?, "updated_at" = ? WHERE "users"."id" = 121898072[0m  [["password_digest", "$2a$04$8IeWPQUZQO22xWwrUzLBlO0FhgZ7sONCuQDUlSXbMCR.HAp7S9J5O"], ["updated_at", "2014-02-07 09:01:46.795672"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/users/121898072
Completed 302 Found in 13ms (ActiveRecord: 2.2ms)
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[36m (54.4ms)[0m  [1mCREATE TABLE "roles" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (26.9ms)[0m  CREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255), "password_digest" varchar(255), "created_at" datetime, "updated_at" datetime, "role_id" integer) 
  [1m[36m (29.2ms)[0m  [1mCREATE  INDEX "index_users_on_role_id" ON "users" ("role_id")[0m
  [1m[35m (21.4ms)[0m  CREATE TABLE "schema_migrations" ("version" varchar(255) NOT NULL) 
  [1m[36m (19.8ms)[0m  [1mCREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")[0m
  [1m[35m (0.1ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (24.8ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140120134037')[0m
  [1m[35m (17.8ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140120115644')
  [1m[36m (23.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140120114246')[0m
  [1m[35m (20.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140120115732')
  [1m[36m (37.8ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140120133118')[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.2ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36m (2.0ms)[0m  [1mDELETE FROM "roles"[0m
  [1m[35m (1.1ms)[0m  INSERT INTO "roles" ("title", "created_at", "updated_at", "id") VALUES ('admin', '2014-02-07 09:02:25', '2014-02-07 09:02:25', 135138680)
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "roles" ("title", "created_at", "updated_at", "id") VALUES ('client', '2014-02-07 09:02:25', '2014-02-07 09:02:25', 121898072)[0m
  [1m[35m (2.2ms)[0m  DELETE FROM "users"
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "id", "role_id") VALUES ('client@client.com', '$2a$10$RiwDqtp.zhm9dA.AqZiAxeZwDPlaFSAmYUftatJW35bQsliKr0EhS', '2014-02-07 09:02:25', '2014-02-07 09:02:25', 121898072, 121898072)[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "id", "role_id") VALUES ('admin@admin.com', '$2a$10$aXhFWYkrTFLTDMwPKXx5GuMPkaNL3V9Q9FgYOYUTdzq1iDpIV4wXG', '2014-02-07 09:02:25', '2014-02-07 09:02:25', 135138680, 135138680)
  [1m[36m (22.1ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------
RoleTest: test_Role_admin_have_permission_to_create_new_user
------------------------------------------------------------
  [1m[36mRole Load (0.2ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ? LIMIT 1[0m  [["id", 135138680]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------
UserTest: test_should_have_role
-------------------------------
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
  [1m[36mRole Load (0.1ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 121898072]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------
UserTest: test_should_user_can
------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 121898072]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------------
UserTest: test_user_email_must_be_certain_format
------------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------
MainControllerTest: test_should_get_index
-----------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
Processing by MainController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 121898072 LIMIT 1[0m
  [1m[35mRole Load (0.1ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 121898072]]
  Rendered charts/_game_online.html.haml (23.1ms)
  Rendered main/index.html.haml within layouts/application (35.7ms)
Completed 200 OK in 146ms (Views: 103.2ms | ActiveRecord: 0.2ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
SessionsControllerTest: test_should_fail_login
----------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"client@client.com", "password"=>"[FILTERED]"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."email" = 'client@client.com' LIMIT 1
Redirected to http://test.host/login
Completed 302 Found in 80ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------------
SessionsControllerTest: test_should_get_new
-------------------------------------------
Processing by SessionsController#new as HTML
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" IS NULL LIMIT 1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" IS NULL LIMIT 1
Completed 200 OK in 8ms (Views: 7.7ms | ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------
SessionsControllerTest: test_should_login
-----------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"client@client.com", "password"=>"[FILTERED]"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."email" = 'client@client.com' LIMIT 1
Redirected to http://test.host/
Completed 302 Found in 76ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------
SessionsControllerTest: test_should_logout
------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Processing by SessionsController#destroy as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 121898072 LIMIT 1
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 121898072]]
Redirected to http://test.host/login
Completed 302 Found in 2ms (ActiveRecord: 0.1ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersControllerTest: test_should_create_user
--------------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 135138680]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"email"=>"client@client.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1[0m
  [1m[35mRole Load (0.1ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 135138680]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (4.0ms)[0m  INSERT INTO "users" ("created_at", "email", "password_digest", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2014-02-07 09:02:26.255299"], ["email", "client@client.com"], ["password_digest", "$2a$04$tCvpiBuTz1TNcJceBYxrxumMnQ09xzSglRdi0TAYlBnL1WhzSPviK"], ["updated_at", "2014-02-07 09:02:26.255299"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/users/135138681
Completed 302 Found in 12ms (ActiveRecord: 4.2ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
---------------------------------------------
UsersControllerTest: test_should_destroy_user
---------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Processing by UsersController#destroy as HTML
  Parameters: {"id"=>"121898072"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.8ms)[0m  DELETE FROM "users" WHERE "users"."id" = ?  [["id", 121898072]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/users
Completed 302 Found in 8ms (ActiveRecord: 3.1ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------
UsersControllerTest: test_should_get_edit
-----------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
Processing by UsersController#edit as HTML
  Parameters: {"id"=>"121898072"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35mRole Load (0.1ms)[0m  SELECT "roles".* FROM "roles"
  Rendered users/_form.html.haml (12.4ms)
Completed 200 OK in 24ms (Views: 21.8ms | ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------
UsersControllerTest: test_should_get_index
------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
Processing by UsersController#index as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users"[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 121898072]]
  [1m[36mRole Load (0.1ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
Completed 200 OK in 12ms (Views: 10.4ms | ActiveRecord: 0.4ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------
UsersControllerTest: test_should_get_new
----------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 135138680]]
Processing by UsersController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mRole Load (0.1ms)[0m  SELECT "roles".* FROM "roles"
  Rendered users/_form.html.haml (3.3ms)
Completed 200 OK in 11ms (Views: 7.2ms | ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
--------------------------------------------------
UsersControllerTest: test_should_route_to_new_user
--------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------------
UsersControllerTest: test_should_route_to_users
-----------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------
UsersControllerTest: test_should_show_user
------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
Processing by UsersController#show as HTML
  Parameters: {"id"=>"121898072"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Completed 200 OK in 6ms (Views: 3.7ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersControllerTest: test_should_update_user
--------------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 135138680]]
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"email"=>"client@client.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "id"=>"121898072"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRole Load (0.1ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 121898072]]
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (2.0ms)[0m  [1mUPDATE "users" SET "password_digest" = ?, "updated_at" = ? WHERE "users"."id" = 121898072[0m  [["password_digest", "$2a$04$fEkALbEXqR9x/4.MaEYZre6uFkExVtHmUaF00XTCBzNk18vHd/hlu"], ["updated_at", "2014-02-07 09:02:26.387311"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/users/121898072
Completed 302 Found in 13ms (ActiveRecord: 2.3ms)
  [1m[36m (0.9ms)[0m  [1mrollback transaction[0m
  [1m[36m (27.4ms)[0m  [1mCREATE TABLE "roles" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (21.6ms)[0m  CREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255), "password_digest" varchar(255), "created_at" datetime, "updated_at" datetime, "role_id" integer) 
  [1m[36m (25.9ms)[0m  [1mCREATE  INDEX "index_users_on_role_id" ON "users" ("role_id")[0m
  [1m[35m (33.0ms)[0m  CREATE TABLE "schema_migrations" ("version" varchar(255) NOT NULL) 
  [1m[36m (19.9ms)[0m  [1mCREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")[0m
  [1m[35m (0.2ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (25.5ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140120134037')[0m
  [1m[35m (28.4ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140120115644')
  [1m[36m (25.4ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140120114246')[0m
  [1m[35m (19.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140120115732')
  [1m[36m (20.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140120133118')[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.2ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36m (2.1ms)[0m  [1mDELETE FROM "roles"[0m
  [1m[35m (1.2ms)[0m  INSERT INTO "roles" ("title", "created_at", "updated_at", "id") VALUES ('admin', '2014-02-07 09:03:57', '2014-02-07 09:03:57', 135138680)
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "roles" ("title", "created_at", "updated_at", "id") VALUES ('client', '2014-02-07 09:03:57', '2014-02-07 09:03:57', 121898072)[0m
  [1m[35m (2.0ms)[0m  DELETE FROM "users"
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "id", "role_id") VALUES ('client@client.com', '$2a$10$ChAHk00VWdfzndq2LBh.IuTrWKvMuG8p3Au.FhA4E5t3GgS.Re8eG', '2014-02-07 09:03:57', '2014-02-07 09:03:57', 121898072, 121898072)[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "id", "role_id") VALUES ('admin@admin.com', '$2a$10$/YZ2RLGCrBKxp.WhQ.KfsOilqPoYy3uC13d1NtVAsLoHCInkGmCAa', '2014-02-07 09:03:57', '2014-02-07 09:03:57', 135138680, 135138680)
  [1m[36m (25.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------
RoleTest: test_Role_admin_have_permission_to_create_new_user
------------------------------------------------------------
  [1m[36mRole Load (0.2ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ? LIMIT 1[0m  [["id", 135138680]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------
UserTest: test_should_have_role
-------------------------------
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
  [1m[36mRole Load (0.3ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 121898072]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------
UserTest: test_should_user_can
------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 121898072]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------------
UserTest: test_user_email_must_be_certain_format
------------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
-----------------------------------------
MainControllerTest: test_should_get_index
-----------------------------------------
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
Processing by MainController#index as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 121898072 LIMIT 1[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 121898072]]
  Rendered charts/_game_online.html.haml (24.0ms)
  Rendered main/index.html.haml within layouts/application (29.3ms)
Completed 200 OK in 120ms (Views: 98.2ms | ActiveRecord: 0.2ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
SessionsControllerTest: test_should_fail_login
----------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"client@client.com", "password"=>"[FILTERED]"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."email" = 'client@client.com' LIMIT 1
Redirected to http://test.host/login
Completed 302 Found in 77ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------------
SessionsControllerTest: test_should_get_new
-------------------------------------------
Processing by SessionsController#new as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" IS NULL LIMIT 1[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" IS NULL LIMIT 1
Completed 200 OK in 8ms (Views: 7.4ms | ActiveRecord: 0.6ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
SessionsControllerTest: test_should_login
-----------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"client@client.com", "password"=>"[FILTERED]"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."email" = 'client@client.com' LIMIT 1
Redirected to http://test.host/
Completed 302 Found in 79ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------
SessionsControllerTest: test_should_logout
------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Processing by SessionsController#destroy as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 121898072 LIMIT 1
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 121898072]]
Redirected to http://test.host/login
Completed 302 Found in 3ms (ActiveRecord: 0.1ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersControllerTest: test_should_create_user
--------------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 135138680]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"email"=>"client@client.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 135138680]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (5.5ms)[0m  INSERT INTO "users" ("created_at", "email", "password_digest", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2014-02-07 09:03:57.494524"], ["email", "client@client.com"], ["password_digest", "$2a$04$nBkCC6mvsus8a2Tze9Z.9.93AEpdJAeyZ.saPxym79sRe1BKkyIFm"], ["updated_at", "2014-02-07 09:03:57.494524"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/users/135138681
Completed 302 Found in 14ms (ActiveRecord: 5.8ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
---------------------------------------------
UsersControllerTest: test_should_destroy_user
---------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Processing by UsersController#destroy as HTML
  Parameters: {"id"=>"121898072"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.8ms)[0m  DELETE FROM "users" WHERE "users"."id" = ?  [["id", 121898072]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/users
Completed 302 Found in 8ms (ActiveRecord: 3.1ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------
UsersControllerTest: test_should_get_edit
-----------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
Processing by UsersController#edit as HTML
  Parameters: {"id"=>"121898072"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1[0m
  [1m[35mRole Load (0.2ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35mRole Load (0.1ms)[0m  SELECT "roles".* FROM "roles"
  Rendered users/_form.html.haml (11.4ms)
Completed 200 OK in 24ms (Views: 21.7ms | ActiveRecord: 0.4ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------
UsersControllerTest: test_should_get_index
------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
Processing by UsersController#index as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1[0m
  [1m[35mRole Load (0.1ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users"[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 121898072]]
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
Completed 200 OK in 13ms (Views: 8.1ms | ActiveRecord: 0.4ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------
UsersControllerTest: test_should_get_new
----------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 135138680]]
Processing by UsersController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mRole Load (0.1ms)[0m  SELECT "roles".* FROM "roles"
  Rendered users/_form.html.haml (3.2ms)
Completed 200 OK in 10ms (Views: 7.9ms | ActiveRecord: 0.2ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------
UsersControllerTest: test_should_route_to_new_user
--------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------
UsersControllerTest: test_should_route_to_show_user
---------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
UsersControllerTest: test_should_route_to_users
-----------------------------------------------
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------
UsersControllerTest: test_should_show_user
------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
Processing by UsersController#show as HTML
  Parameters: {"id"=>"121898072"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1[0m
  [1m[35mRole Load (0.1ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Completed 200 OK in 17ms (Views: 11.9ms | ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersControllerTest: test_should_update_user
--------------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 135138680]]
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"email"=>"client@client.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "id"=>"121898072"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRole Load (0.1ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 121898072]]
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (2.5ms)[0m  [1mUPDATE "users" SET "password_digest" = ?, "updated_at" = ? WHERE "users"."id" = 121898072[0m  [["password_digest", "$2a$04$mAYJFCQULC.LjjEq49T1KOzqs9xWFzXL4i.XJ2ro/HJb6FBpgBvcS"], ["updated_at", "2014-02-07 09:03:57.726315"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/users/121898072
Completed 302 Found in 23ms (ActiveRecord: 3.0ms)
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[36m (56.8ms)[0m  [1mCREATE TABLE "roles" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (27.2ms)[0m  CREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255), "password_digest" varchar(255), "created_at" datetime, "updated_at" datetime, "role_id" integer) 
  [1m[36m (23.6ms)[0m  [1mCREATE  INDEX "index_users_on_role_id" ON "users" ("role_id")[0m
  [1m[35m (20.8ms)[0m  CREATE TABLE "schema_migrations" ("version" varchar(255) NOT NULL) 
  [1m[36m (47.3ms)[0m  [1mCREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")[0m
  [1m[35m (0.1ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (18.5ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140120134037')[0m
  [1m[35m (18.2ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140120115644')
  [1m[36m (42.5ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140120114246')[0m
  [1m[35m (20.5ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140120115732')
  [1m[36m (33.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140120133118')[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.1ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36m (1.9ms)[0m  [1mDELETE FROM "roles"[0m
  [1m[35m (1.1ms)[0m  INSERT INTO "roles" ("title", "created_at", "updated_at", "id") VALUES ('admin', '2014-02-07 09:05:16', '2014-02-07 09:05:16', 135138680)
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "roles" ("title", "created_at", "updated_at", "id") VALUES ('client', '2014-02-07 09:05:16', '2014-02-07 09:05:16', 121898072)[0m
  [1m[35m (2.1ms)[0m  DELETE FROM "users"
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "id", "role_id") VALUES ('client@client.com', '$2a$10$aZF3yYhorO5DtJ74Z1xmZuLYco0JI0sUT79O1JW352sX00qOlU/VK', '2014-02-07 09:05:16', '2014-02-07 09:05:16', 121898072, 121898072)[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "id", "role_id") VALUES ('admin@admin.com', '$2a$10$GTT8fSzjSP//3dcAbWxl1.Jn49cpkNdrFr2QeDpzCs0ZO/Tvmrey2', '2014-02-07 09:05:16', '2014-02-07 09:05:16', 135138680, 135138680)
  [1m[36m (23.0ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------
RoleTest: test_Role_admin_have_permission_to_create_new_user
------------------------------------------------------------
  [1m[36mRole Load (0.2ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ? LIMIT 1[0m  [["id", 135138680]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------
UserTest: test_should_have_role
-------------------------------
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
  [1m[36mRole Load (0.1ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36mRole Load (0.1ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 121898072]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------
UserTest: test_should_user_can
------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 121898072]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------
UserTest: test_user_email_must_be_certain_format
------------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------
MainControllerTest: test_should_get_index
-----------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
Processing by MainController#index as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 121898072 LIMIT 1[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 121898072]]
  Rendered charts/_game_online.html.haml (20.5ms)
  Rendered main/index.html.haml within layouts/application (28.2ms)
Completed 200 OK in 119ms (Views: 96.9ms | ActiveRecord: 0.2ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
SessionsControllerTest: test_should_fail_login
----------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"client@client.com", "password"=>"[FILTERED]"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."email" = 'client@client.com' LIMIT 1
Redirected to http://test.host/login
Completed 302 Found in 78ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------
SessionsControllerTest: test_should_get_new
-------------------------------------------
Processing by SessionsController#new as HTML
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" IS NULL LIMIT 1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" IS NULL LIMIT 1
Completed 200 OK in 10ms (Views: 9.5ms | ActiveRecord: 0.2ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------
SessionsControllerTest: test_should_login
-----------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"client@client.com", "password"=>"[FILTERED]"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."email" = 'client@client.com' LIMIT 1
Redirected to http://test.host/
Completed 302 Found in 83ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------
SessionsControllerTest: test_should_logout
------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Processing by SessionsController#destroy as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 121898072 LIMIT 1
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 121898072]]
Redirected to http://test.host/login
Completed 302 Found in 3ms (ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersControllerTest: test_should_create_user
--------------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "users"
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"email"=>"client@client.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 135138680]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (4.5ms)[0m  INSERT INTO "users" ("created_at", "email", "password_digest", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2014-02-07 09:05:17.239520"], ["email", "client@client.com"], ["password_digest", "$2a$04$VUwnjYagw46uACI.juwq.OWKx9.z7tThX8O5m8DSDyVrynvoC0HHi"], ["updated_at", "2014-02-07 09:05:17.239520"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/users/135138681
Completed 302 Found in 11ms (ActiveRecord: 4.7ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (1.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
UsersControllerTest: test_should_destroy_user
---------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Processing by UsersController#destroy as HTML
  Parameters: {"id"=>"121898072"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.7ms)[0m  DELETE FROM "users" WHERE "users"."id" = ?  [["id", 121898072]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/users
Completed 302 Found in 7ms (ActiveRecord: 3.0ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------
UsersControllerTest: test_should_get_edit
-----------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
Processing by UsersController#edit as HTML
  Parameters: {"id"=>"121898072"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1[0m
  [1m[35mRole Load (0.1ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35mRole Load (0.1ms)[0m  SELECT "roles".* FROM "roles"
  Rendered users/_form.html.haml (12.4ms)
Completed 200 OK in 26ms (Views: 23.2ms | ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------
UsersControllerTest: test_should_get_index
------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
Processing by UsersController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users"[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 121898072]]
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
Completed 200 OK in 12ms (Views: 8.0ms | ActiveRecord: 0.5ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------
UsersControllerTest: test_should_get_new
----------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Processing by UsersController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1
  [1m[36mRole Load (0.1ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mRole Load (0.1ms)[0m  SELECT "roles".* FROM "roles"
  Rendered users/_form.html.haml (5.2ms)
Completed 200 OK in 12ms (Views: 9.6ms | ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------
UsersControllerTest: test_should_route_to_new_user
--------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------
UsersControllerTest: test_should_route_to_show_user
---------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------------
UsersControllerTest: test_should_route_to_users
-----------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------
UsersControllerTest: test_should_show_user
------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
Processing by UsersController#show as HTML
  Parameters: {"id"=>"121898072"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1[0m
  [1m[35mRole Load (0.1ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Completed 200 OK in 5ms (Views: 2.7ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersControllerTest: test_should_update_user
--------------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"email"=>"client@client.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "id"=>"121898072"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 121898072]]
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.9ms)[0m  [1mUPDATE "users" SET "password_digest" = ?, "updated_at" = ? WHERE "users"."id" = 121898072[0m  [["password_digest", "$2a$04$UXmZyTGVFdQOAz0lIjJ04.76.0t3pHLRd8JWjKvEyGxLB/eTN6QD2"], ["updated_at", "2014-02-07 09:05:17.378015"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/users/121898072
Completed 302 Found in 12ms (ActiveRecord: 2.3ms)
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[36m (35.3ms)[0m  [1mCREATE TABLE "roles" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (22.4ms)[0m  CREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255), "password_digest" varchar(255), "created_at" datetime, "updated_at" datetime, "role_id" integer) 
  [1m[36m (18.1ms)[0m  [1mCREATE  INDEX "index_users_on_role_id" ON "users" ("role_id")[0m
  [1m[35m (20.2ms)[0m  CREATE TABLE "schema_migrations" ("version" varchar(255) NOT NULL) 
  [1m[36m (20.5ms)[0m  [1mCREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")[0m
  [1m[35m (0.3ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (22.5ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140120134037')[0m
  [1m[35m (23.8ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140120115644')
  [1m[36m (22.9ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140120114246')[0m
  [1m[35m (18.0ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140120115732')
  [1m[36m (15.7ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140120133118')[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.1ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (2.1ms)[0m  [1mDELETE FROM "roles"[0m
  [1m[35m (1.2ms)[0m  INSERT INTO "roles" ("title", "created_at", "updated_at", "id") VALUES ('admin', '2014-02-07 09:05:54', '2014-02-07 09:05:54', 135138680)
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "roles" ("title", "created_at", "updated_at", "id") VALUES ('client', '2014-02-07 09:05:54', '2014-02-07 09:05:54', 121898072)[0m
  [1m[35m (2.3ms)[0m  DELETE FROM "users"
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "id", "role_id") VALUES ('client@client.com', '$2a$10$vON2n9pHUw9y8phsmHynYuNvLF2Mz92u3x/Iv86cM.gmQI0cBw0Bm', '2014-02-07 09:05:54', '2014-02-07 09:05:54', 121898072, 121898072)[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "id", "role_id") VALUES ('admin@admin.com', '$2a$10$5K///a.4fxCdu3DF3A/xV.xioPOfTiRUndKZ34rO79vDStRAjpHte', '2014-02-07 09:05:54', '2014-02-07 09:05:54', 135138680, 135138680)
  [1m[36m (22.0ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------
RoleTest: test_Role_admin_have_permission_to_create_new_user
------------------------------------------------------------
  [1m[36mRole Load (0.2ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ? LIMIT 1[0m  [["id", 135138680]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------
UserTest: test_should_have_role
-------------------------------
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
  [1m[36mRole Load (0.1ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36mRole Load (0.1ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 121898072]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------
UserTest: test_should_user_can
------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 121898072]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------------
UserTest: test_user_email_must_be_certain_format
------------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------
MainControllerTest: test_should_get_index
-----------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
Processing by MainController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 121898072 LIMIT 1[0m
  [1m[35mRole Load (0.1ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 121898072]]
  Rendered charts/_game_online.html.haml (27.9ms)
  Rendered main/index.html.haml within layouts/application (35.9ms)
Completed 200 OK in 154ms (Views: 116.5ms | ActiveRecord: 0.3ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
SessionsControllerTest: test_should_fail_login
----------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"client@client.com", "password"=>"[FILTERED]"}
  [1m[35mUser Load (1.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."email" = 'client@client.com' LIMIT 1
Redirected to http://test.host/login
Completed 302 Found in 85ms (ActiveRecord: 1.1ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------------
SessionsControllerTest: test_should_get_new
-------------------------------------------
Processing by SessionsController#new as HTML
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" IS NULL LIMIT 1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" IS NULL LIMIT 1
Completed 200 OK in 8ms (Views: 7.8ms | ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------
SessionsControllerTest: test_should_login
-----------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"client@client.com", "password"=>"[FILTERED]"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."email" = 'client@client.com' LIMIT 1
Redirected to http://test.host/
Completed 302 Found in 79ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------
SessionsControllerTest: test_should_logout
------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Processing by SessionsController#destroy as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 121898072 LIMIT 1
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 121898072]]
Redirected to http://test.host/login
Completed 302 Found in 3ms (ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersControllerTest: test_should_create_user
--------------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"email"=>"client@client.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 135138680]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (4.2ms)[0m  INSERT INTO "users" ("created_at", "email", "password_digest", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2014-02-07 09:05:55.418191"], ["email", "client@client.com"], ["password_digest", "$2a$04$63sLzMngRSMJIMlX4yStLe/NbgzhcvQoYDGK4rQM8UER0uakJJfd6"], ["updated_at", "2014-02-07 09:05:55.418191"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/users/135138681
Completed 302 Found in 11ms (ActiveRecord: 4.5ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
---------------------------------------------
UsersControllerTest: test_should_destroy_user
---------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Processing by UsersController#destroy as HTML
  Parameters: {"id"=>"121898072"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.9ms)[0m  DELETE FROM "users" WHERE "users"."id" = ?  [["id", 121898072]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/users
Completed 302 Found in 8ms (ActiveRecord: 3.1ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------
UsersControllerTest: test_should_get_edit
-----------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
Processing by UsersController#edit as HTML
  Parameters: {"id"=>"121898072"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1[0m
  [1m[35mRole Load (0.1ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35mRole Load (0.1ms)[0m  SELECT "roles".* FROM "roles"
  Rendered users/_form.html.haml (12.2ms)
Completed 200 OK in 25ms (Views: 22.0ms | ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------
UsersControllerTest: test_should_get_index
------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
Processing by UsersController#index as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users"[0m
  [1m[35mRole Load (2.1ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 121898072]]
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
Completed 200 OK in 13ms (Views: 8.8ms | ActiveRecord: 2.4ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------
UsersControllerTest: test_should_get_new
----------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Processing by UsersController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1
  [1m[36mRole Load (0.1ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mRole Load (0.1ms)[0m  SELECT "roles".* FROM "roles"
  Rendered users/_form.html.haml (3.6ms)
Completed 200 OK in 10ms (Views: 8.0ms | ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
---------------------------------------------------
UsersControllerTest: test_should_route_to_edit_user
---------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
--------------------------------------------------
UsersControllerTest: test_should_route_to_new_user
--------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
---------------------------------------------------
UsersControllerTest: test_should_route_to_show_user
---------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------------
UsersControllerTest: test_should_route_to_users
-----------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------
UsersControllerTest: test_should_show_user
------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
Processing by UsersController#show as HTML
  Parameters: {"id"=>"121898072"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Completed 200 OK in 6ms (Views: 3.0ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersControllerTest: test_should_update_user
--------------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"email"=>"client@client.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "id"=>"121898072"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 121898072]]
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (2.1ms)[0m  [1mUPDATE "users" SET "password_digest" = ?, "updated_at" = ? WHERE "users"."id" = 121898072[0m  [["password_digest", "$2a$04$vRKE4.jbV6Jc7P5k15iVqeUuD/b7IAhl91QFNl8q632N62mz8863."], ["updated_at", "2014-02-07 09:05:55.561732"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/users/121898072
Completed 302 Found in 11ms (ActiveRecord: 2.4ms)
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[36m (77.7ms)[0m  [1mCREATE TABLE "roles" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (21.4ms)[0m  CREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255), "password_digest" varchar(255), "created_at" datetime, "updated_at" datetime, "role_id" integer) 
  [1m[36m (18.4ms)[0m  [1mCREATE  INDEX "index_users_on_role_id" ON "users" ("role_id")[0m
  [1m[35m (26.7ms)[0m  CREATE TABLE "schema_migrations" ("version" varchar(255) NOT NULL) 
  [1m[36m (22.6ms)[0m  [1mCREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")[0m
  [1m[35m (0.1ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (29.2ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140120134037')[0m
  [1m[35m (25.5ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140120115644')
  [1m[36m (27.0ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140120114246')[0m
  [1m[35m (41.4ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140120115732')
  [1m[36m (19.7ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140120133118')[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.1ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36m (2.0ms)[0m  [1mDELETE FROM "roles"[0m
  [1m[35m (1.3ms)[0m  INSERT INTO "roles" ("title", "created_at", "updated_at", "id") VALUES ('admin', '2014-02-07 09:11:25', '2014-02-07 09:11:25', 135138680)
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "roles" ("title", "created_at", "updated_at", "id") VALUES ('client', '2014-02-07 09:11:25', '2014-02-07 09:11:25', 121898072)[0m
  [1m[35m (2.1ms)[0m  DELETE FROM "users"
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "id", "role_id") VALUES ('client@client.com', '$2a$10$HXWhFR4rvjOdHBn3mSBfpe2gt7l0S7HWNCF6zNtP7Df9mBMwhmTfq', '2014-02-07 09:11:25', '2014-02-07 09:11:25', 121898072, 121898072)[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "id", "role_id") VALUES ('admin@admin.com', '$2a$10$Ef80QhGzpn/Zmbx.v3A1GuWQ.pGUnPAGti2/gvySu/w2Ejb78DgD.', '2014-02-07 09:11:25', '2014-02-07 09:11:25', 135138680, 135138680)
  [1m[36m (38.3ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------
RoleTest: test_Role_admin_have_permission_to_create_new_user
------------------------------------------------------------
  [1m[36mRole Load (0.2ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ? LIMIT 1[0m  [["id", 135138680]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------
UserTest: test_should_have_role
-------------------------------
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
  [1m[36mRole Load (0.2ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 121898072]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------
UserTest: test_should_user_can
------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36mRole Load (0.9ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 121898072]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------------
UserTest: test_user_email_must_be_certain_email_format
------------------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------
UserTest: test_user_email_must_be_certain_password_format
---------------------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------
MainControllerTest: test_should_get_index
-----------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
Processing by MainController#index as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 121898072 LIMIT 1[0m
  [1m[35mRole Load (0.1ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 121898072]]
  Rendered charts/_game_online.html.haml (26.3ms)
  Rendered main/index.html.haml within layouts/application (31.7ms)
Completed 200 OK in 145ms (Views: 92.3ms | ActiveRecord: 0.3ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
SessionsControllerTest: test_should_fail_login
----------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"client@client.com", "password"=>"[FILTERED]"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."email" = 'client@client.com' LIMIT 1
Redirected to http://test.host/login
Completed 302 Found in 86ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------
SessionsControllerTest: test_should_get_new
-------------------------------------------
Processing by SessionsController#new as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" IS NULL LIMIT 1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" IS NULL LIMIT 1
Completed 200 OK in 9ms (Views: 8.2ms | ActiveRecord: 0.3ms)
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------
SessionsControllerTest: test_should_login
-----------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"client@client.com", "password"=>"[FILTERED]"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."email" = 'client@client.com' LIMIT 1
Redirected to http://test.host/
Completed 302 Found in 76ms (ActiveRecord: 0.2ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------
SessionsControllerTest: test_should_logout
------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Processing by SessionsController#destroy as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 121898072 LIMIT 1
  [1m[36mRole Load (0.1ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 121898072]]
Redirected to http://test.host/login
Completed 302 Found in 3ms (ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersControllerTest: test_should_create_user
--------------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"email"=>"client@client.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1[0m
  [1m[35mRole Load (0.1ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 135138680]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (5.0ms)[0m  INSERT INTO "users" ("created_at", "email", "password_digest", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2014-02-07 09:11:26.070875"], ["email", "client@client.com"], ["password_digest", "$2a$04$kvlmpdjcUltfbksQ5lQGtuRrmgjpBCsdsntedH1LyS0hnsZG9KyNu"], ["updated_at", "2014-02-07 09:11:26.070875"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/users/135138681
Completed 302 Found in 11ms (ActiveRecord: 5.3ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
---------------------------------------------
UsersControllerTest: test_should_destroy_user
---------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Processing by UsersController#destroy as HTML
  Parameters: {"id"=>"121898072"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.7ms)[0m  DELETE FROM "users" WHERE "users"."id" = ?  [["id", 121898072]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/users
Completed 302 Found in 7ms (ActiveRecord: 3.0ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------
UsersControllerTest: test_should_get_edit
-----------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
Processing by UsersController#edit as HTML
  Parameters: {"id"=>"121898072"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35mRole Load (0.1ms)[0m  SELECT "roles".* FROM "roles"
  Rendered users/_form.html.haml (12.8ms)
Completed 200 OK in 25ms (Views: 22.4ms | ActiveRecord: 0.4ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------
UsersControllerTest: test_should_get_index
------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
Processing by UsersController#index as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users"[0m
  [1m[35mRole Load (0.1ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 121898072]]
  [1m[36mRole Load (0.1ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
Completed 200 OK in 13ms (Views: 11.1ms | ActiveRecord: 0.4ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------
UsersControllerTest: test_should_get_new
----------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Processing by UsersController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mRole Load (0.1ms)[0m  SELECT "roles".* FROM "roles"
  Rendered users/_form.html.haml (3.9ms)
Completed 200 OK in 11ms (Views: 9.4ms | ActiveRecord: 0.2ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
---------------------------------------------------
UsersControllerTest: test_should_route_to_edit_user
---------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
--------------------------------------------------
UsersControllerTest: test_should_route_to_new_user
--------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------
UsersControllerTest: test_should_route_to_show_user
---------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------------
UsersControllerTest: test_should_route_to_users
-----------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------
UsersControllerTest: test_should_show_user
------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
Processing by UsersController#show as HTML
  Parameters: {"id"=>"121898072"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Completed 200 OK in 6ms (Views: 3.7ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersControllerTest: test_should_update_user
--------------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"email"=>"client@client.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "id"=>"121898072"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1
  [1m[36mRole Load (0.1ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 121898072]]
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (2.5ms)[0m  [1mUPDATE "users" SET "password_digest" = ?, "updated_at" = ? WHERE "users"."id" = 121898072[0m  [["password_digest", "$2a$04$3ImuGuq67/JACTd67bg9EurVqfq2n4tZKrOdK1LLyyB96ncXXdRma"], ["updated_at", "2014-02-07 09:11:26.212205"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/users/121898072
Completed 302 Found in 12ms (ActiveRecord: 2.8ms)
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[36m (33.3ms)[0m  [1mCREATE TABLE "roles" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (34.7ms)[0m  CREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255), "password_digest" varchar(255), "created_at" datetime, "updated_at" datetime, "role_id" integer) 
  [1m[36m (32.0ms)[0m  [1mCREATE  INDEX "index_users_on_role_id" ON "users" ("role_id")[0m
  [1m[35m (19.5ms)[0m  CREATE TABLE "schema_migrations" ("version" varchar(255) NOT NULL) 
  [1m[36m (23.7ms)[0m  [1mCREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")[0m
  [1m[35m (0.2ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (29.2ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140120134037')[0m
  [1m[35m (19.8ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140120115644')
  [1m[36m (17.4ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140120114246')[0m
  [1m[35m (16.9ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140120115732')
  [1m[36m (37.4ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140120133118')[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.1ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (1.8ms)[0m  [1mDELETE FROM "roles"[0m
  [1m[35m (1.2ms)[0m  INSERT INTO "roles" ("title", "created_at", "updated_at", "id") VALUES ('admin', '2014-02-07 09:16:22', '2014-02-07 09:16:22', 135138680)
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "roles" ("title", "created_at", "updated_at", "id") VALUES ('client', '2014-02-07 09:16:22', '2014-02-07 09:16:22', 121898072)[0m
  [1m[35m (2.2ms)[0m  DELETE FROM "users"
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "id", "role_id") VALUES ('client@client.com', '$2a$10$p978X4OjONSxVE3E5w4HO.wKpndjtMmXYZdA3pf0eSQf5E5f4kzmW', '2014-02-07 09:16:22', '2014-02-07 09:16:22', 121898072, 121898072)[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "id", "role_id") VALUES ('admin@admin.com', '$2a$10$lnFy.sdOMF9vOAh6uqLoHOa/qRgLcI3roL.xDQbJy5SuZnghZVxf6', '2014-02-07 09:16:22', '2014-02-07 09:16:22', 135138680, 135138680)
  [1m[36m (19.8ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------------------
RoleTest: test_role_admin_must_have_permissions_to_add_user
-----------------------------------------------------------
  [1m[36mRole Load (0.4ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ? LIMIT 1[0m  [["id", 135138680]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------------------
RoleTest: test_role_client_must_have_permissions_to_online_and_on_date
----------------------------------------------------------------------
  [1m[35mRole Load (0.1ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------
UserTest: test_should_have_role
-------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 135138680]]
  [1m[35mRole Load (0.1ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 121898072]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------
UserTest: test_should_user_can
------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 135138680]]
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (3.5ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 121898072]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------------------
UserTest: test_user_email_must_be_certain_email_format
------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
---------------------------------------------------------
UserTest: test_user_email_must_be_certain_password_format
---------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------
MainControllerTest: test_should_get_index
-----------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Processing by MainController#index as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 121898072 LIMIT 1
  [1m[36mRole Load (0.1ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 121898072]]
  Rendered charts/_game_online.html.haml (22.8ms)
  Rendered main/index.html.haml within layouts/application (38.1ms)
Completed 200 OK in 122ms (Views: 101.0ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------
SessionsControllerTest: test_should_fail_login
----------------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"client@client.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."email" = 'client@client.com' LIMIT 1[0m
Redirected to http://test.host/login
Completed 302 Found in 82ms (ActiveRecord: 0.1ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------
SessionsControllerTest: test_should_get_new
-------------------------------------------
Processing by SessionsController#new as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" IS NULL LIMIT 1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" IS NULL LIMIT 1[0m
Completed 200 OK in 8ms (Views: 7.6ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------
SessionsControllerTest: test_should_login
-----------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"client@client.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."email" = 'client@client.com' LIMIT 1[0m
Redirected to http://test.host/
Completed 302 Found in 77ms (ActiveRecord: 0.1ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------
SessionsControllerTest: test_should_logout
------------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
Processing by SessionsController#destroy as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 121898072 LIMIT 1[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 121898072]]
Redirected to http://test.host/login
Completed 302 Found in 3ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
UsersControllerTest: test_should_create_user
--------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"email"=>"client@client.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (4.3ms)[0m  [1mINSERT INTO "users" ("created_at", "email", "password_digest", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", "2014-02-07 09:16:22.607772"], ["email", "client@client.com"], ["password_digest", "$2a$04$7EpmTpES/Vbf3h5Mi8dII.R0oTl4qnR7onkH46WAfv6c/nUHJjEHS"], ["updated_at", "2014-02-07 09:16:22.607772"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/users/135138681
Completed 302 Found in 15ms (ActiveRecord: 4.6ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------
UsersControllerTest: test_should_destroy_user
---------------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
Processing by UsersController#destroy as HTML
  Parameters: {"id"=>"121898072"}
  [1m[36mUser Load (0.9ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.9ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 121898072]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/users
Completed 302 Found in 8ms (ActiveRecord: 4.0ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------
UsersControllerTest: test_should_get_edit
-----------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Processing by UsersController#edit as HTML
  Parameters: {"id"=>"121898072"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36mRole Load (0.1ms)[0m  [1mSELECT "roles".* FROM "roles"[0m
  Rendered users/_form.html.haml (12.1ms)
Completed 200 OK in 23ms (Views: 20.4ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------
UsersControllerTest: test_should_get_index
------------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Processing by UsersController#index as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1
  [1m[36mRole Load (0.1ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (2.2ms)[0m  SELECT "users".* FROM "users"
  [1m[36mRole Load (0.1ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 121898072]]
  [1m[35mRole Load (0.1ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 135138680]]
Completed 200 OK in 14ms (Views: 8.9ms | ActiveRecord: 2.6ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
----------------------------------------
UsersControllerTest: test_should_get_new
----------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
Processing by UsersController#new as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1[0m
  [1m[35mRole Load (0.1ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 135138680]]
  [1m[36mRole Load (0.2ms)[0m  [1mSELECT "roles".* FROM "roles"[0m
  Rendered users/_form.html.haml (3.6ms)
Completed 200 OK in 10ms (Views: 7.9ms | ActiveRecord: 0.4ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------------
UsersControllerTest: test_should_route_to_edit_user
---------------------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------
UsersControllerTest: test_should_route_to_new_user
--------------------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
---------------------------------------------------
UsersControllerTest: test_should_route_to_show_user
---------------------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UsersControllerTest: test_should_route_to_users
-----------------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------
UsersControllerTest: test_should_show_user
------------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Processing by UsersController#show as HTML
  Parameters: {"id"=>"121898072"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
Completed 200 OK in 7ms (Views: 4.6ms | ActiveRecord: 0.2ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
--------------------------------------------
UsersControllerTest: test_should_update_user
--------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"email"=>"client@client.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "id"=>"121898072"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (3.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 121898072]]
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (2.6ms)[0m  UPDATE "users" SET "password_digest" = ?, "updated_at" = ? WHERE "users"."id" = 121898072  [["password_digest", "$2a$04$VB6U5LbSdr5HW/FqPAO8VO3DghhHPX6h3WujQdXhcPgZ0lLd7oO9y"], ["updated_at", "2014-02-07 09:16:22.765246"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/users/121898072
Completed 302 Found in 17ms (ActiveRecord: 5.9ms)
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (27.1ms)[0m  [1mCREATE TABLE "roles" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (20.3ms)[0m  CREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255), "password_digest" varchar(255), "created_at" datetime, "updated_at" datetime, "role_id" integer) 
  [1m[36m (28.4ms)[0m  [1mCREATE  INDEX "index_users_on_role_id" ON "users" ("role_id")[0m
  [1m[35m (23.6ms)[0m  CREATE TABLE "schema_migrations" ("version" varchar(255) NOT NULL) 
  [1m[36m (18.4ms)[0m  [1mCREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")[0m
  [1m[35m (0.1ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (26.2ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140120134037')[0m
  [1m[35m (17.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140120115644')
  [1m[36m (22.2ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140120114246')[0m
  [1m[35m (17.4ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140120115732')
  [1m[36m (41.4ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140120133118')[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.1ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36m (2.0ms)[0m  [1mDELETE FROM "roles"[0m
  [1m[35m (1.1ms)[0m  INSERT INTO "roles" ("title", "created_at", "updated_at", "id") VALUES ('admin', '2014-02-07 09:28:42', '2014-02-07 09:28:42', 135138680)
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "roles" ("title", "created_at", "updated_at", "id") VALUES ('client', '2014-02-07 09:28:42', '2014-02-07 09:28:42', 121898072)[0m
  [1m[35m (2.2ms)[0m  DELETE FROM "users"
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "id", "role_id") VALUES ('client@client.com', '$2a$10$PTD1Lnjjej6kLVEJCmeSve/4tM7SLGdcKolm6lN0QBgrzI.7/Io6C', '2014-02-07 09:28:42', '2014-02-07 09:28:42', 121898072, 121898072)[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "id", "role_id") VALUES ('admin@admin.com', '$2a$10$qg0hHUi82RSSCMutoAwm2e2KYd.vNIiFJf7dIHxAaHmY4f9UGoTLS', '2014-02-07 09:28:42', '2014-02-07 09:28:42', 135138680, 135138680)
  [1m[36m (46.9ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------------------
RoleTest: test_role_admin_must_have_permissions_to_add_user
-----------------------------------------------------------
  [1m[36mRole Load (0.2ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ? LIMIT 1[0m  [["id", 135138680]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------------------
RoleTest: test_role_client_must_have_permissions_to_online_and_on_date
----------------------------------------------------------------------
  [1m[35mRole Load (0.1ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------
UserTest: test_should_have_role
-------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 135138680]]
  [1m[35mRole Load (0.1ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 121898072]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------
UserTest: test_should_user_can
------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 135138680]]
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 121898072]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------------------
UserTest: test_user_email_must_be_certain_email_format
------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
---------------------------------------------------------
UserTest: test_user_email_must_be_certain_password_format
---------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------------------------
ChartsControllerTest: test_should_get_game_online_select_via_ajax
-----------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Processing by ChartsController#game_online_select as JS
  Parameters: {"date"=>{"year"=>"2014", "month"=>"2", "day"=>"7"}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 121898072 LIMIT 1
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 121898072]]
  Rendered charts/_game_online_select.html.haml (21.5ms)
  Rendered charts/game_online_select.js.erb (37.2ms)
Completed 200 OK in 141ms (Views: 81.3ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------
ChartsControllerTest: test_should_get_on_date
---------------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
Processing by ChartsController#on_date as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 121898072 LIMIT 1[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 121898072]]
  Rendered charts/_game_online_select.html.haml (31.9ms)
Completed 200 OK in 105ms (Views: 86.7ms | ActiveRecord: 0.2ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------------------------
ChartsControllerTest: test_should_post_new_dot_via_ajax
-------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Processing by ChartsController#new_dot as JS
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 121898072 LIMIT 1
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 121898072]]
Completed 200 OK in 9ms (Views: 0.1ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------
MainControllerTest: test_should_get_index
-----------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
Processing by MainController#index as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 121898072 LIMIT 1[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 121898072]]
Completed 200 OK in 81ms (Views: 56.6ms | ActiveRecord: 0.2ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
SessionsControllerTest: test_should_fail_login
----------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"client@client.com", "password"=>"[FILTERED]"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."email" = 'client@client.com' LIMIT 1
Redirected to http://test.host/login
Completed 302 Found in 81ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------
SessionsControllerTest: test_should_get_new
-------------------------------------------
Processing by SessionsController#new as HTML
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" IS NULL LIMIT 1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" IS NULL LIMIT 1
Completed 200 OK in 10ms (Views: 9.6ms | ActiveRecord: 0.5ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------
SessionsControllerTest: test_should_login
-----------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"client@client.com", "password"=>"[FILTERED]"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."email" = 'client@client.com' LIMIT 1
Redirected to http://test.host/
Completed 302 Found in 86ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------
SessionsControllerTest: test_should_logout
------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Processing by SessionsController#destroy as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 121898072 LIMIT 1
  [1m[36mRole Load (0.1ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 121898072]]
Redirected to http://test.host/login
Completed 302 Found in 2ms (ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersControllerTest: test_should_create_user
--------------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"email"=>"client@client.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 135138680]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (4.7ms)[0m  INSERT INTO "users" ("created_at", "email", "password_digest", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2014-02-07 09:28:43.712673"], ["email", "client@client.com"], ["password_digest", "$2a$04$39xk5WvRFnaUVNPCcOoYOu/R4tB0cmaG2A9UlxKZNL0tqQGEXw8OS"], ["updated_at", "2014-02-07 09:28:43.712673"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/users/135138681
Completed 302 Found in 11ms (ActiveRecord: 4.9ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
UsersControllerTest: test_should_destroy_user
---------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.8ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Processing by UsersController#destroy as HTML
  Parameters: {"id"=>"121898072"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1
  [1m[36mRole Load (0.1ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (3.7ms)[0m  DELETE FROM "users" WHERE "users"."id" = ?  [["id", 121898072]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/users
Completed 302 Found in 10ms (ActiveRecord: 4.1ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------
UsersControllerTest: test_should_get_edit
-----------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
Processing by UsersController#edit as HTML
  Parameters: {"id"=>"121898072"}
  [1m[36mUser Load (4.4ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1[0m
  [1m[35mRole Load (0.1ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35mRole Load (0.1ms)[0m  SELECT "roles".* FROM "roles"
  Rendered users/_form.html.haml (13.4ms)
Completed 200 OK in 29ms (Views: 20.3ms | ActiveRecord: 4.7ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------
UsersControllerTest: test_should_get_index
------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
Processing by UsersController#index as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT "users".* FROM "users"[0m
  [1m[35mRole Load (0.2ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 121898072]]
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
Completed 200 OK in 13ms (Views: 10.9ms | ActiveRecord: 0.8ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
----------------------------------------
UsersControllerTest: test_should_get_new
----------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Processing by UsersController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1
  [1m[36mRole Load (0.1ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mRole Load (0.2ms)[0m  SELECT "roles".* FROM "roles"
  Rendered users/_form.html.haml (4.8ms)
Completed 200 OK in 15ms (Views: 10.2ms | ActiveRecord: 0.4ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------
UsersControllerTest: test_should_route_to_edit_user
---------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
--------------------------------------------------
UsersControllerTest: test_should_route_to_new_user
--------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
---------------------------------------------------
UsersControllerTest: test_should_route_to_show_user
---------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------------
UsersControllerTest: test_should_route_to_users
-----------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------
UsersControllerTest: test_should_show_user
------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
Processing by UsersController#show as HTML
  Parameters: {"id"=>"121898072"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Completed 200 OK in 6ms (Views: 3.1ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersControllerTest: test_should_update_user
--------------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"email"=>"client@client.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "id"=>"121898072"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRole Load (0.1ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 121898072]]
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.9ms)[0m  [1mUPDATE "users" SET "password_digest" = ?, "updated_at" = ? WHERE "users"."id" = 121898072[0m  [["password_digest", "$2a$04$csb0owuCpWBM0L8kTsEXbOQC9E9jfL7XTD6cejziahNQUXimyjbee"], ["updated_at", "2014-02-07 09:28:43.876462"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/users/121898072
Completed 302 Found in 15ms (ActiveRecord: 2.3ms)
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[36m (45.2ms)[0m  [1mCREATE TABLE "roles" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (18.1ms)[0m  CREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255), "password_digest" varchar(255), "created_at" datetime, "updated_at" datetime, "role_id" integer) 
  [1m[36m (23.3ms)[0m  [1mCREATE  INDEX "index_users_on_role_id" ON "users" ("role_id")[0m
  [1m[35m (21.2ms)[0m  CREATE TABLE "schema_migrations" ("version" varchar(255) NOT NULL) 
  [1m[36m (32.6ms)[0m  [1mCREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")[0m
  [1m[35m (0.1ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (19.7ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140120134037')[0m
  [1m[35m (18.2ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140120115644')
  [1m[36m (38.1ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140120114246')[0m
  [1m[35m (20.1ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140120115732')
  [1m[36m (21.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140120133118')[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.1ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36m (2.2ms)[0m  [1mDELETE FROM "roles"[0m
  [1m[35m (1.2ms)[0m  INSERT INTO "roles" ("title", "created_at", "updated_at", "id") VALUES ('admin', '2014-02-07 09:29:54', '2014-02-07 09:29:54', 135138680)
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "roles" ("title", "created_at", "updated_at", "id") VALUES ('client', '2014-02-07 09:29:54', '2014-02-07 09:29:54', 121898072)[0m
  [1m[35m (2.4ms)[0m  DELETE FROM "users"
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "id", "role_id") VALUES ('client@client.com', '$2a$10$Jq1JBu9Fo9s9A.4.itUdXO9zehv6HUsTyID7Z0MdBcqcy/yFsoosi', '2014-02-07 09:29:54', '2014-02-07 09:29:54', 121898072, 121898072)[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "id", "role_id") VALUES ('admin@admin.com', '$2a$10$c9nPzLMFX4EYm0EPieTuHOjThjjisVFJgdKbt1B3UlwqD68j6pYve', '2014-02-07 09:29:54', '2014-02-07 09:29:54', 135138680, 135138680)
  [1m[36m (29.2ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------------------
RoleTest: test_role_admin_must_have_permissions_to_add_user
-----------------------------------------------------------
  [1m[36mRole Load (0.2ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ? LIMIT 1[0m  [["id", 135138680]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------------------
RoleTest: test_role_client_must_have_permissions_to_online_and_on_date
----------------------------------------------------------------------
  [1m[35mRole Load (0.1ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------
UserTest: test_should_have_role
-------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 135138680]]
  [1m[35mRole Load (0.1ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 121898072]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------
UserTest: test_should_user_can
------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 135138680]]
  [1m[35mRole Load (3.6ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 121898072]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------------------
UserTest: test_user_email_must_be_certain_email_format
------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
---------------------------------------------------------
UserTest: test_user_email_must_be_certain_password_format
---------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------------------------------
ChartsControllerTest: test_should_get_game_online_select_via_ajax
-----------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Processing by ChartsController#game_online_select as JS
  Parameters: {"date"=>{"year"=>"2014", "month"=>"2", "day"=>"7"}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 121898072 LIMIT 1
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 121898072]]
  Rendered charts/_game_online_select.html.haml (23.8ms)
  Rendered charts/game_online_select.js.erb (44.4ms)
Completed 200 OK in 100ms (Views: 73.3ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------
ChartsControllerTest: test_should_get_on_date
---------------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
Processing by ChartsController#on_date as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 121898072 LIMIT 1[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 121898072]]
  Rendered charts/_game_online_select.html.haml (40.2ms)
Completed 200 OK in 124ms (Views: 92.2ms | ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------
ChartsControllerTest: test_should_post_new_dot_via_ajax
-------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Processing by ChartsController#new_dot as JS
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 121898072 LIMIT 1
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 121898072]]
Completed 200 OK in 15ms (Views: 0.2ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------
ChartsControllerTest: test_should_route_to_on_date
--------------------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36m (7.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
MainControllerTest: test_should_get_index
-----------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Processing by MainController#index as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 121898072 LIMIT 1
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 121898072]]
Completed 200 OK in 75ms (Views: 47.0ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------------
SessionsControllerTest: test_should_fail_login
----------------------------------------------
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"client@client.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."email" = 'client@client.com' LIMIT 1[0m
Redirected to http://test.host/login
Completed 302 Found in 80ms (ActiveRecord: 0.1ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
SessionsControllerTest: test_should_get_new
-------------------------------------------
Processing by SessionsController#new as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" IS NULL LIMIT 1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" IS NULL LIMIT 1[0m
Completed 200 OK in 9ms (Views: 8.3ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------
SessionsControllerTest: test_should_login
-----------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"client@client.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."email" = 'client@client.com' LIMIT 1[0m
Redirected to http://test.host/
Completed 302 Found in 81ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------
SessionsControllerTest: test_should_logout
------------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
Processing by SessionsController#destroy as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 121898072 LIMIT 1[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 121898072]]
Redirected to http://test.host/login
Completed 302 Found in 3ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
UsersControllerTest: test_should_create_user
--------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"email"=>"client@client.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (4.6ms)[0m  [1mINSERT INTO "users" ("created_at", "email", "password_digest", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", "2014-02-07 09:29:55.645466"], ["email", "client@client.com"], ["password_digest", "$2a$04$bAIatJa8UgLc/9DinrOSk.s2vwb6TwjvllYfpz8mH./ARxqn.kiwG"], ["updated_at", "2014-02-07 09:29:55.645466"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/users/135138681
Completed 302 Found in 17ms (ActiveRecord: 5.0ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------
UsersControllerTest: test_should_destroy_user
---------------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
Processing by UsersController#destroy as HTML
  Parameters: {"id"=>"121898072"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1[0m
  [1m[35mRole Load (0.1ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (3.2ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 121898072]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/users
Completed 302 Found in 8ms (ActiveRecord: 3.5ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (2.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------
UsersControllerTest: test_should_get_edit
-----------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Processing by UsersController#edit as HTML
  Parameters: {"id"=>"121898072"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36mRole Load (0.1ms)[0m  [1mSELECT "roles".* FROM "roles"[0m
  Rendered users/_form.html.haml (13.1ms)
Completed 200 OK in 22ms (Views: 19.1ms | ActiveRecord: 0.4ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------
UsersControllerTest: test_should_get_index
------------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Processing by UsersController#index as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1
  [1m[36mRole Load (0.1ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users"
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 121898072]]
  [1m[35mRole Load (0.1ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 135138680]]
Completed 200 OK in 11ms (Views: 8.8ms | ActiveRecord: 0.5ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------
UsersControllerTest: test_should_get_new
----------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
Processing by UsersController#new as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 135138680]]
  [1m[36mRole Load (0.1ms)[0m  [1mSELECT "roles".* FROM "roles"[0m
  Rendered users/_form.html.haml (3.5ms)
Completed 200 OK in 14ms (Views: 11.7ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------
UsersControllerTest: test_should_route_to_edit_user
---------------------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------------
UsersControllerTest: test_should_route_to_new_user
--------------------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------------
UsersControllerTest: test_should_route_to_show_user
---------------------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UsersControllerTest: test_should_route_to_users
-----------------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------
UsersControllerTest: test_should_show_user
------------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Processing by UsersController#show as HTML
  Parameters: {"id"=>"121898072"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
Completed 200 OK in 6ms (Views: 3.2ms | ActiveRecord: 0.2ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
--------------------------------------------
UsersControllerTest: test_should_update_user
--------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"email"=>"client@client.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "id"=>"121898072"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1[0m
  [1m[35mRole Load (0.1ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 121898072]]
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (2.0ms)[0m  UPDATE "users" SET "password_digest" = ?, "updated_at" = ? WHERE "users"."id" = 121898072  [["password_digest", "$2a$04$1mpVt0dZVDsRZ8zQLeOgEuSuFzFbEP4AKNtWNRzjMk1zPSgwy8RHi"], ["updated_at", "2014-02-07 09:29:55.795308"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/users/121898072
Completed 302 Found in 13ms (ActiveRecord: 2.3ms)
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (30.1ms)[0m  [1mCREATE TABLE "roles" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (17.4ms)[0m  CREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255), "password_digest" varchar(255), "created_at" datetime, "updated_at" datetime, "role_id" integer) 
  [1m[36m (39.6ms)[0m  [1mCREATE  INDEX "index_users_on_role_id" ON "users" ("role_id")[0m
  [1m[35m (19.0ms)[0m  CREATE TABLE "schema_migrations" ("version" varchar(255) NOT NULL) 
  [1m[36m (18.0ms)[0m  [1mCREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")[0m
  [1m[35m (0.1ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (38.7ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140120134037')[0m
  [1m[35m (18.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140120115644')
  [1m[36m (21.2ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140120114246')[0m
  [1m[35m (28.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140120115732')
  [1m[36m (18.5ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140120133118')[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.2ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (3.0ms)[0m  [1mDELETE FROM "roles"[0m
  [1m[35m (1.1ms)[0m  INSERT INTO "roles" ("title", "created_at", "updated_at", "id") VALUES ('admin', '2014-02-07 09:30:50', '2014-02-07 09:30:50', 135138680)
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "roles" ("title", "created_at", "updated_at", "id") VALUES ('client', '2014-02-07 09:30:50', '2014-02-07 09:30:50', 121898072)[0m
  [1m[35m (0.2ms)[0m  DELETE FROM "users"
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "id", "role_id") VALUES ('client@client.com', '$2a$10$CUEpU0vnfULrQCG5dXvKOeD2jLiYU.Yp8RXzf6olH/xvDpLzPpeUi', '2014-02-07 09:30:50', '2014-02-07 09:30:50', 121898072, 121898072)[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "id", "role_id") VALUES ('admin@admin.com', '$2a$10$0ycEbMPcB4gd/jHKmdejcOwMFRYYXAccJ9ql9Ru6gMK87rwXD5CtG', '2014-02-07 09:30:50', '2014-02-07 09:30:50', 135138680, 135138680)
  [1m[36m (20.8ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------------------
RoleTest: test_role_admin_must_have_permissions_to_add_user
-----------------------------------------------------------
  [1m[36mRole Load (0.2ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ? LIMIT 1[0m  [["id", 135138680]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------------------
RoleTest: test_role_client_must_have_permissions_to_online_and_on_date
----------------------------------------------------------------------
  [1m[35mRole Load (0.2ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------
UserTest: test_should_have_role
-------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 135138680]]
  [1m[35mRole Load (0.1ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 121898072]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------
UserTest: test_should_user_can
------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 135138680]]
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35mRole Load (0.1ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 121898072]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------------------
UserTest: test_user_email_must_be_certain_email_format
------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
---------------------------------------------------------
UserTest: test_user_email_must_be_certain_password_format
---------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------------------------------
ChartsControllerTest: test_should_get_game_online_select_via_ajax
-----------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Processing by ChartsController#game_online_select as JS
  Parameters: {"date"=>{"year"=>"2014", "month"=>"2", "day"=>"7"}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 121898072 LIMIT 1
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 121898072]]
  Rendered charts/_game_online_select.html.haml (7.3ms)
  Rendered charts/game_online_select.js.erb (15.9ms)
Completed 200 OK in 458ms (Views: 31.3ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------
ChartsControllerTest: test_should_get_on_date
---------------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
Processing by ChartsController#on_date as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 121898072 LIMIT 1[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 121898072]]
  Rendered charts/_game_online_select.html.haml (8.4ms)
Completed 200 OK in 75ms (Views: 60.9ms | ActiveRecord: 0.2ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------------------------
ChartsControllerTest: test_should_post_new_dot_via_ajax
-------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Processing by ChartsController#new_dot as JS
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 121898072 LIMIT 1
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 121898072]]
Completed 200 OK in 13ms (Views: 0.3ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------------
ChartsControllerTest: test_should_route_to_on_date
--------------------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
MainControllerTest: test_should_get_index
-----------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Processing by MainController#index as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 121898072 LIMIT 1
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 121898072]]
Completed 200 OK in 21ms (Views: 9.2ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------------
SessionsControllerTest: test_should_fail_login
----------------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"client@client.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."email" = 'client@client.com' LIMIT 1[0m
Redirected to http://test.host/login
Completed 302 Found in 85ms (ActiveRecord: 0.1ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------
SessionsControllerTest: test_should_get_new
-------------------------------------------
Processing by SessionsController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" IS NULL LIMIT 1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" IS NULL LIMIT 1[0m
Completed 200 OK in 8ms (Views: 7.2ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------
SessionsControllerTest: test_should_login
-----------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"client@client.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."email" = 'client@client.com' LIMIT 1[0m
Redirected to http://test.host/
Completed 302 Found in 76ms (ActiveRecord: 0.1ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------
SessionsControllerTest: test_should_logout
------------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
Processing by SessionsController#destroy as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 121898072 LIMIT 1[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 121898072]]
Redirected to http://test.host/login
Completed 302 Found in 4ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
UsersControllerTest: test_should_create_user
--------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"email"=>"client@client.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (6.7ms)[0m  [1mINSERT INTO "users" ("created_at", "email", "password_digest", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", "2014-02-07 09:30:51.883059"], ["email", "client@client.com"], ["password_digest", "$2a$04$W48b.sxFS54MgpWko9UAR.ilLsveQuOZ0tG8UV2qT3/btvxnwfUk2"], ["updated_at", "2014-02-07 09:30:51.883059"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/users/135138681
Completed 302 Found in 15ms (ActiveRecord: 6.9ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.9ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------
UsersControllerTest: test_should_destroy_user
---------------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
Processing by UsersController#destroy as HTML
  Parameters: {"id"=>"121898072"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (3.0ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 121898072]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/users
Completed 302 Found in 8ms (ActiveRecord: 3.4ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (1.6ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------
UsersControllerTest: test_should_get_edit
-----------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Processing by UsersController#edit as HTML
  Parameters: {"id"=>"121898072"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1
  [1m[36mRole Load (0.1ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36mRole Load (0.1ms)[0m  [1mSELECT "roles".* FROM "roles"[0m
  Rendered users/_form.html.haml (12.1ms)
Completed 200 OK in 20ms (Views: 17.2ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------
UsersControllerTest: test_should_get_index
------------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Processing by UsersController#index as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users"
  [1m[36mRole Load (0.1ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 121898072]]
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 135138680]]
Completed 200 OK in 12ms (Views: 10.2ms | ActiveRecord: 0.4ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
----------------------------------------
UsersControllerTest: test_should_get_new
----------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
Processing by UsersController#new as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 135138680]]
  [1m[36mRole Load (0.1ms)[0m  [1mSELECT "roles".* FROM "roles"[0m
  Rendered users/_form.html.haml (3.2ms)
Completed 200 OK in 12ms (Views: 7.8ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------------
UsersControllerTest: test_should_route_to_edit_user
---------------------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------------
UsersControllerTest: test_should_route_to_new_user
--------------------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------------
UsersControllerTest: test_should_route_to_show_user
---------------------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UsersControllerTest: test_should_route_to_users
-----------------------------------------------
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------
UsersControllerTest: test_should_show_user
------------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Processing by UsersController#show as HTML
  Parameters: {"id"=>"121898072"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1
  [1m[36mRole Load (0.1ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
Completed 200 OK in 12ms (Views: 9.6ms | ActiveRecord: 0.2ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
UsersControllerTest: test_should_update_user
--------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"email"=>"client@client.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "id"=>"121898072"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 121898072]]
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (2.0ms)[0m  UPDATE "users" SET "password_digest" = ?, "updated_at" = ? WHERE "users"."id" = 121898072  [["password_digest", "$2a$04$K6tbYIZxRjaF16U3SyL6YuIZo2ocCHZsD7iwV.zIzaKPWTLIRxV6C"], ["updated_at", "2014-02-07 09:30:52.033451"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/users/121898072
Completed 302 Found in 12ms (ActiveRecord: 2.3ms)
  [1m[35m (0.8ms)[0m  rollback transaction
  [1m[36m (69.4ms)[0m  [1mCREATE TABLE "roles" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (18.7ms)[0m  CREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255), "password_digest" varchar(255), "created_at" datetime, "updated_at" datetime, "role_id" integer) 
  [1m[36m (21.1ms)[0m  [1mCREATE  INDEX "index_users_on_role_id" ON "users" ("role_id")[0m
  [1m[35m (30.5ms)[0m  CREATE TABLE "schema_migrations" ("version" varchar(255) NOT NULL) 
  [1m[36m (20.6ms)[0m  [1mCREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")[0m
  [1m[35m (0.1ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (24.5ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140120134037')[0m
  [1m[35m (22.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140120115644')
  [1m[36m (24.8ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140120114246')[0m
  [1m[35m (40.7ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140120115732')
  [1m[36m (30.9ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140120133118')[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.2ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36m (4.7ms)[0m  [1mDELETE FROM "roles"[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "roles" ("title", "created_at", "updated_at", "id") VALUES ('admin', '2014-02-07 09:41:03', '2014-02-07 09:41:03', 135138680)
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "roles" ("title", "created_at", "updated_at", "id") VALUES ('client', '2014-02-07 09:41:03', '2014-02-07 09:41:03', 121898072)[0m
  [1m[35m (0.3ms)[0m  DELETE FROM "users"
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "id", "role_id") VALUES ('client@client.com', '$2a$10$7fYcBQ45erKAv4OcISxA8.yP4OFClTPgrWDV8mzvxlSPmb6ZXzNeu', '2014-02-07 09:41:03', '2014-02-07 09:41:03', 121898072, 121898072)[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "id", "role_id") VALUES ('admin@admin.com', '$2a$10$QW4nX0oIitWCneIujGNM/uzvP2P7Mu1iuC86mwVK8wWBTvgF8zQBG', '2014-02-07 09:41:03', '2014-02-07 09:41:03', 135138680, 135138680)
  [1m[36m (90.0ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------------------
RoleTest: test_role_admin_must_have_permissions_to_add_user
-----------------------------------------------------------
  [1m[36mRole Load (0.4ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ? LIMIT 1[0m  [["id", 135138680]]
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------------------
RoleTest: test_role_client_must_have_permissions_to_online_and_on_date
----------------------------------------------------------------------
  [1m[35mRole Load (0.1ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
-------------------------------
UserTest: test_should_have_role
-------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 135138680]]
  [1m[35mRole Load (0.1ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 121898072]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------
UserTest: test_should_user_can
------------------------------
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 135138680]]
  [1m[35mRole Load (0.4ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 121898072]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------------------
UserTest: test_user_email_must_be_certain_email_format
------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
---------------------------------------------------------
UserTest: test_user_email_must_be_certain_password_format
---------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------------------------
ChartsControllerTest: test_should_get_game_online_select_via_ajax
-----------------------------------------------------------------
  [1m[36mUser Load (5.5ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Processing by ChartsController#game_online_select as JS
  Parameters: {"date"=>{"year"=>"2014", "month"=>"2", "day"=>"7"}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 121898072 LIMIT 1
  [1m[36mRole Load (0.1ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 121898072]]
  Rendered charts/_game_online_select.html.haml (43.5ms)
  Rendered charts/game_online_select.js.erb (66.2ms)
Completed 200 OK in 136ms (Views: 99.9ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------
ChartsControllerTest: test_should_get_on_date
---------------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
Processing by ChartsController#on_date as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 121898072 LIMIT 1[0m
  [1m[35mRole Load (0.1ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 121898072]]
  Rendered charts/_game_online_select.html.haml (50.3ms)
Completed 200 OK in 252ms (Views: 220.3ms | ActiveRecord: 0.2ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------
ChartsControllerTest: test_should_post_new_dot_via_ajax
-------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Processing by ChartsController#new_dot as JS
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 121898072 LIMIT 1
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 121898072]]
Completed 200 OK in 13ms (Views: 0.1ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------
ChartsControllerTest: test_should_route_to_on_date
--------------------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36m (9.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
MainControllerTest: test_should_get_index
-----------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Processing by MainController#index as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 121898072 LIMIT 1
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 121898072]]
Completed 200 OK in 77ms (Views: 59.7ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------
SessionsControllerTest: test_should_fail_login
----------------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"client@client.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."email" = 'client@client.com' LIMIT 1[0m
Redirected to http://test.host/login
Completed 302 Found in 118ms (ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------
SessionsControllerTest: test_should_get_new
-------------------------------------------
Processing by SessionsController#new as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" IS NULL LIMIT 1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" IS NULL LIMIT 1[0m
Completed 200 OK in 10ms (Views: 9.4ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------
SessionsControllerTest: test_should_login
-----------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"client@client.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."email" = 'client@client.com' LIMIT 1[0m
Redirected to http://test.host/
Completed 302 Found in 92ms (ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------
SessionsControllerTest: test_should_logout
------------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
Processing by SessionsController#destroy as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 121898072 LIMIT 1[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 121898072]]
Redirected to http://test.host/login
Completed 302 Found in 3ms (ActiveRecord: 0.2ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
UsersControllerTest: test_should_create_user
--------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"email"=>"client@client.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (6.7ms)[0m  [1mINSERT INTO "users" ("created_at", "email", "password_digest", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", "2014-02-07 09:41:04.776858"], ["email", "client@client.com"], ["password_digest", "$2a$04$sQCLR7xdycT8dJfSsBvYlew1PlGN2fSYifPNdSVmgD/RbXbOCdsoS"], ["updated_at", "2014-02-07 09:41:04.776858"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/users/135138681
Completed 302 Found in 13ms (ActiveRecord: 7.0ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------
UsersControllerTest: test_should_destroy_user
---------------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
Processing by UsersController#destroy as HTML
  Parameters: {"id"=>"121898072"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (3.0ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 121898072]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/users
Completed 302 Found in 8ms (ActiveRecord: 3.3ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.8ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------
UsersControllerTest: test_should_get_edit
-----------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Processing by UsersController#edit as HTML
  Parameters: {"id"=>"121898072"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36mRole Load (0.1ms)[0m  [1mSELECT "roles".* FROM "roles"[0m
  Rendered users/_form.html.haml (11.5ms)
Completed 200 OK in 22ms (Views: 18.4ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------
UsersControllerTest: test_should_get_index
------------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Processing by UsersController#index as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1
  [1m[36mRole Load (0.1ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users"
  [1m[36mRole Load (0.1ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 121898072]]
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 135138680]]
Completed 200 OK in 13ms (Views: 10.5ms | ActiveRecord: 0.4ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------
UsersControllerTest: test_should_get_new
----------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
Processing by UsersController#new as HTML
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 135138680]]
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT "roles".* FROM "roles"[0m
  Rendered users/_form.html.haml (7.7ms)
Completed 200 OK in 14ms (Views: 12.4ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------
UsersControllerTest: test_should_route_to_edit_user
---------------------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------
UsersControllerTest: test_should_route_to_new_user
--------------------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------------
UsersControllerTest: test_should_route_to_show_user
---------------------------------------------------
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UsersControllerTest: test_should_route_to_users
-----------------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------
UsersControllerTest: test_should_show_user
------------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Processing by UsersController#show as HTML
  Parameters: {"id"=>"121898072"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 121898072]]
Completed 200 OK in 8ms (Views: 5.7ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersControllerTest: test_should_update_user
--------------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"email"=>"client@client.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "id"=>"121898072"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1
  [1m[36mRole Load (0.4ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 121898072]]
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.9ms)[0m  [1mUPDATE "users" SET "password_digest" = ?, "updated_at" = ? WHERE "users"."id" = 121898072[0m  [["password_digest", "$2a$04$3DVMuI74XlQpbYmvUQvicOZPBA16nEyf5b1zECRcEM/g4Wcmpz0JO"], ["updated_at", "2014-02-07 09:41:04.929667"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/users/121898072
Completed 302 Found in 14ms (ActiveRecord: 2.6ms)
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[36m (30.7ms)[0m  [1mCREATE TABLE "roles" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (26.2ms)[0m  CREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255), "password_digest" varchar(255), "created_at" datetime, "updated_at" datetime, "role_id" integer) 
  [1m[36m (14.8ms)[0m  [1mCREATE  INDEX "index_users_on_role_id" ON "users" ("role_id")[0m
  [1m[35m (16.2ms)[0m  CREATE TABLE "schema_migrations" ("version" varchar(255) NOT NULL) 
  [1m[36m (20.7ms)[0m  [1mCREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")[0m
  [1m[35m (0.1ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (18.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140120134037')[0m
  [1m[35m (16.9ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140120115644')
  [1m[36m (18.9ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140120114246')[0m
  [1m[35m (18.1ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140120115732')
  [1m[36m (15.1ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140120133118')[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.1ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36m (1.3ms)[0m  [1mDELETE FROM "roles"[0m
  [1m[35m (0.7ms)[0m  INSERT INTO "roles" ("title", "created_at", "updated_at", "id") VALUES ('admin', '2014-02-07 15:23:54', '2014-02-07 15:23:54', 135138680)
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "roles" ("title", "created_at", "updated_at", "id") VALUES ('client', '2014-02-07 15:23:54', '2014-02-07 15:23:54', 121898072)[0m
  [1m[35m (1.1ms)[0m  DELETE FROM "users"
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "id", "role_id") VALUES ('client@client.com', '$2a$10$1/qvfwYFrrcFTAIM2tXzLOi5FgZapZbQYEm98A6GY.7cBTtFymh9y', '2014-02-07 15:23:54', '2014-02-07 15:23:54', 121898072, 121898072)[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "id", "role_id") VALUES ('admin@admin.com', '$2a$10$EBJeEUuQF3rnh.kWEIslr.myysvJmoJ./aVStIGh13vUWhJkojUte', '2014-02-07 15:23:54', '2014-02-07 15:23:54', 135138680, 135138680)
  [1m[36m (16.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------
RoleTest: test_Role_admin_have_permission_to_create_new_user
------------------------------------------------------------
  [1m[36mRole Load (0.3ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ? LIMIT 1[0m  [["id", 135138680]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------
UserTest: test_should_have_role
-------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
  [1m[36mRole Load (0.2ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36mRole Load (0.1ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 121898072]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------
UserTest: test_should_user_can
------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 121898072]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------------
UserTest: test_user_email_must_be_certain_format
------------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------------
ChartsControllerTest: test_should_get_game_online_select_via_ajax
-----------------------------------------------------------------
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
Processing by ChartsController#game_online_select as JS
  Parameters: {"date"=>{"year"=>"2014", "month"=>"2", "day"=>"7"}}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 121898072 LIMIT 1[0m
  [1m[35mRole Load (0.1ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 121898072]]
  Rendered charts/_game_online_select.html.haml (5.3ms)
  Rendered charts/game_online_select.js.erb (18.1ms)
Completed 200 OK in 148ms (Views: 81.2ms | ActiveRecord: 0.2ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
ChartsControllerTest: test_should_get_on_date
---------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Processing by ChartsController#on_date as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 121898072 LIMIT 1
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 121898072]]
  Rendered charts/_game_online_select.html.haml (4.5ms)
Completed 200 OK in 1682ms (Views: 1677.6ms | ActiveRecord: 0.1ms)
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------
ChartsControllerTest: test_should_post_new_dot_via_ajax
-------------------------------------------------------
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------
ChartsControllerTest: test_should_route_to_on_date
--------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
-----------------------------------------
MainControllerTest: test_should_get_index
-----------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
Processing by MainController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 121898072 LIMIT 1[0m
  [1m[35mRole Load (0.1ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 121898072]]
Completed 200 OK in 27ms (Views: 20.8ms | ActiveRecord: 0.2ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
SessionsControllerTest: test_should_fail_login
----------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"client@client.com", "password"=>"[FILTERED]"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."email" = 'client@client.com' LIMIT 1
Redirected to http://test.host/login
Completed 302 Found in 81ms (ActiveRecord: 0.2ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------
SessionsControllerTest: test_should_get_new
-------------------------------------------
Processing by SessionsController#new as HTML
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" IS NULL LIMIT 1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" IS NULL LIMIT 1
Completed 200 OK in 15ms (Views: 14.5ms | ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
SessionsControllerTest: test_should_login
-----------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"client@client.com", "password"=>"[FILTERED]"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."email" = 'client@client.com' LIMIT 1
Redirected to http://test.host/
Completed 302 Found in 81ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------
SessionsControllerTest: test_should_logout
------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Processing by SessionsController#destroy as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 121898072 LIMIT 1
  [1m[36mRole Load (0.1ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 121898072]]
Redirected to http://test.host/login
Completed 302 Found in 4ms (ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersControllerTest: test_should_create_user
--------------------------------------------
  [1m[35mUser Load (3.6ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 135138680]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"email"=>"client@client.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 135138680]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (2.5ms)[0m  INSERT INTO "users" ("created_at", "email", "password_digest", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2014-02-07 15:23:56.737041"], ["email", "client@client.com"], ["password_digest", "$2a$04$pxtPfnJyFM4GV7HRZ67gv.96n9GM1xQLkhtk5mXnlrm3t3oXfaSx."], ["updated_at", "2014-02-07 15:23:56.737041"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/users/135138681
Completed 302 Found in 12ms (ActiveRecord: 2.7ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
---------------------------------------------
UsersControllerTest: test_should_destroy_user
---------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Processing by UsersController#destroy as HTML
  Parameters: {"id"=>"121898072"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "users" WHERE "users"."id" = ?  [["id", 121898072]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/users
Completed 302 Found in 8ms (ActiveRecord: 0.7ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------
UsersControllerTest: test_should_get_edit
-----------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
Processing by UsersController#edit as HTML
  Parameters: {"id"=>"121898072"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35mRole Load (0.2ms)[0m  SELECT "roles".* FROM "roles"
  Rendered users/_form.html.haml (75.5ms)
Completed 200 OK in 98ms (Views: 95.5ms | ActiveRecord: 0.4ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------
UsersControllerTest: test_should_get_index
------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
Processing by UsersController#index as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users"[0m
  [1m[35mRole Load (0.3ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 121898072]]
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
Completed 200 OK in 15ms (Views: 12.9ms | ActiveRecord: 0.6ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------
UsersControllerTest: test_should_get_new
----------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 135138680]]
Processing by UsersController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mRole Load (0.2ms)[0m  SELECT "roles".* FROM "roles"
  Rendered users/_form.html.haml (3.2ms)
Completed 200 OK in 19ms (Views: 17.7ms | ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------
UsersControllerTest: test_should_show_user
------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
Processing by UsersController#show as HTML
  Parameters: {"id"=>"121898072"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Completed 200 OK in 22ms (Views: 19.5ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersControllerTest: test_should_update_user
--------------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 135138680]]
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"email"=>"client@client.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "id"=>"121898072"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRole Load (0.1ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 121898072]]
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.2ms)[0m  [1mUPDATE "users" SET "password_digest" = ?, "updated_at" = ? WHERE "users"."id" = 121898072[0m  [["password_digest", "$2a$04$9/6noyg1rJCIXVtz8aqGAe3Dfwkzo9I.j/W0rJFiU4rVjo0BZleJ6"], ["updated_at", "2014-02-07 15:23:56.950480"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/users/121898072
Completed 302 Found in 11ms (ActiveRecord: 1.6ms)
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[36m (32.7ms)[0m  [1mCREATE TABLE "roles" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (16.1ms)[0m  CREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255), "password_digest" varchar(255), "created_at" datetime, "updated_at" datetime, "role_id" integer) 
  [1m[36m (19.6ms)[0m  [1mCREATE  INDEX "index_users_on_role_id" ON "users" ("role_id")[0m
  [1m[35m (20.6ms)[0m  CREATE TABLE "schema_migrations" ("version" varchar(255) NOT NULL) 
  [1m[36m (14.7ms)[0m  [1mCREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")[0m
  [1m[35m (0.1ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (22.4ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140120134037')[0m
  [1m[35m (17.0ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140120115644')
  [1m[36m (16.5ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140120114246')[0m
  [1m[35m (16.2ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140120115732')
  [1m[36m (28.8ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140120133118')[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.2ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36m (1.2ms)[0m  [1mDELETE FROM "roles"[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "roles" ("title", "created_at", "updated_at", "id") VALUES ('admin', '2014-02-07 15:24:46', '2014-02-07 15:24:46', 135138680)
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "roles" ("title", "created_at", "updated_at", "id") VALUES ('client', '2014-02-07 15:24:46', '2014-02-07 15:24:46', 121898072)[0m
  [1m[35m (1.2ms)[0m  DELETE FROM "users"
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "id", "role_id") VALUES ('client@client.com', '$2a$10$uhqE4tz4IT6jcSmhuKahReagrFu4n9cZOQZEsHYjK6AmdfvxE0vX6', '2014-02-07 15:24:46', '2014-02-07 15:24:46', 121898072, 121898072)[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "id", "role_id") VALUES ('admin@admin.com', '$2a$10$3.hvjbCzb69In2D6nnI1GeS83Fg6APCf.6sIDei/iN4eAe82PtcQK', '2014-02-07 15:24:46', '2014-02-07 15:24:46', 135138680, 135138680)
  [1m[36m (41.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------
RoleTest: test_Role_admin_have_permission_to_create_new_user
------------------------------------------------------------
  [1m[36mRole Load (0.2ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ? LIMIT 1[0m  [["id", 135138680]]
  [1m[35m (1.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
-------------------------------
UserTest: test_should_have_role
-------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
  [1m[36mRole Load (0.6ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 121898072]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------
UserTest: test_should_user_can
------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36mRole Load (0.1ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 121898072]]
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------
UserTest: test_user_email_must_be_certain_format
------------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------------
ChartsControllerTest: test_should_get_game_online_select_via_ajax
-----------------------------------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
Processing by ChartsController#game_online_select as JS
  Parameters: {"date"=>{"year"=>"2014", "month"=>"2", "day"=>"7"}}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 121898072 LIMIT 1[0m
  [1m[35mRole Load (0.1ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 121898072]]
  Rendered charts/_game_online_select.html.haml (21.7ms)
  Rendered charts/game_online_select.js.erb (30.4ms)
Completed 200 OK in 197ms (Views: 47.4ms | ActiveRecord: 0.2ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
ChartsControllerTest: test_should_get_on_date
---------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Processing by ChartsController#on_date as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 121898072 LIMIT 1
  [1m[36mRole Load (0.1ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 121898072]]
  Rendered charts/_game_online_select.html.haml (19.0ms)
Completed 200 OK in 117ms (Views: 94.4ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------
ChartsControllerTest: test_should_post_new_dot_via_ajax
-------------------------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
--------------------------------------------------
ChartsControllerTest: test_should_route_to_on_date
--------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------
MainControllerTest: test_should_get_index
-----------------------------------------
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
Processing by MainController#index as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 121898072 LIMIT 1[0m
  [1m[35mRole Load (0.1ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 121898072]]
Completed 200 OK in 61ms (Views: 35.3ms | ActiveRecord: 0.2ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
SessionsControllerTest: test_should_fail_login
----------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"client@client.com", "password"=>"[FILTERED]"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."email" = 'client@client.com' LIMIT 1
Redirected to http://test.host/login
Completed 302 Found in 85ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------
SessionsControllerTest: test_should_get_new
-------------------------------------------
Processing by SessionsController#new as HTML
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" IS NULL LIMIT 1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" IS NULL LIMIT 1
Completed 200 OK in 7ms (Views: 6.1ms | ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
SessionsControllerTest: test_should_login
-----------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"client@client.com", "password"=>"[FILTERED]"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."email" = 'client@client.com' LIMIT 1
Redirected to http://test.host/
Completed 302 Found in 82ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------
SessionsControllerTest: test_should_logout
------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Processing by SessionsController#destroy as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 121898072 LIMIT 1
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 121898072]]
Redirected to http://test.host/login
Completed 302 Found in 2ms (ActiveRecord: 0.2ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersControllerTest: test_should_create_user
--------------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 135138680]]
  [1m[35m (3.1ms)[0m  SELECT COUNT(*) FROM "users"
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"email"=>"client@client.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1[0m
  [1m[35mRole Load (0.1ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 135138680]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (2.3ms)[0m  INSERT INTO "users" ("created_at", "email", "password_digest", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2014-02-07 15:24:46.751430"], ["email", "client@client.com"], ["password_digest", "$2a$04$c3DQAaVtAb.wu.XDbyw1JenS0Mg36ch/gL6MnmpmIQhNbH9CqvZNK"], ["updated_at", "2014-02-07 15:24:46.751430"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/users/135138681
Completed 302 Found in 9ms (ActiveRecord: 2.6ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
---------------------------------------------
UsersControllerTest: test_should_destroy_user
---------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Processing by UsersController#destroy as HTML
  Parameters: {"id"=>"121898072"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.6ms)[0m  DELETE FROM "users" WHERE "users"."id" = ?  [["id", 121898072]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/users
Completed 302 Found in 5ms (ActiveRecord: 1.9ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
UsersControllerTest: test_should_get_edit
-----------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
Processing by UsersController#edit as HTML
  Parameters: {"id"=>"121898072"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35mRole Load (0.1ms)[0m  SELECT "roles".* FROM "roles"
  Rendered users/_form.html.haml (17.3ms)
Completed 200 OK in 27ms (Views: 25.3ms | ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------
UsersControllerTest: test_should_get_index
------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
Processing by UsersController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users"[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 121898072]]
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
Completed 200 OK in 34ms (Views: 31.7ms | ActiveRecord: 0.4ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------
UsersControllerTest: test_should_get_new
----------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 135138680]]
Processing by UsersController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mRole Load (0.1ms)[0m  SELECT "roles".* FROM "roles"
  Rendered users/_form.html.haml (8.1ms)
Completed 200 OK in 14ms (Views: 11.3ms | ActiveRecord: 0.2ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------
UsersControllerTest: test_should_show_user
------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
Processing by UsersController#show as HTML
  Parameters: {"id"=>"121898072"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Completed 200 OK in 6ms (Views: 3.6ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersControllerTest: test_should_update_user
--------------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 135138680]]
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"email"=>"client@client.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "id"=>"121898072"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1
  [1m[36mRole Load (1.3ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 121898072]]
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "users" SET "password_digest" = ?, "updated_at" = ? WHERE "users"."id" = 121898072[0m  [["password_digest", "$2a$04$ZekcsoKEdrtCXC7lrVKLFuTHtsKhqz6Oa6xcUe1n4LwIi/wzurMVS"], ["updated_at", "2014-02-07 15:24:46.882800"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/users/121898072
Completed 302 Found in 12ms (ActiveRecord: 1.9ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[36m (26.3ms)[0m  [1mCREATE TABLE "roles" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (17.5ms)[0m  CREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255), "password_digest" varchar(255), "created_at" datetime, "updated_at" datetime, "role_id" integer) 
  [1m[36m (17.8ms)[0m  [1mCREATE  INDEX "index_users_on_role_id" ON "users" ("role_id")[0m
  [1m[35m (17.6ms)[0m  CREATE TABLE "schema_migrations" ("version" varchar(255) NOT NULL) 
  [1m[36m (18.1ms)[0m  [1mCREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")[0m
  [1m[35m (0.2ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (18.0ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140120134037')[0m
  [1m[35m (15.8ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140120115644')
  [1m[36m (20.7ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140120114246')[0m
  [1m[35m (18.7ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140120115732')
  [1m[36m (16.9ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140120133118')[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.1ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (1.3ms)[0m  [1mDELETE FROM "roles"[0m
  [1m[35m (0.8ms)[0m  INSERT INTO "roles" ("title", "created_at", "updated_at", "id") VALUES ('admin', '2014-02-07 15:24:56', '2014-02-07 15:24:56', 135138680)
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "roles" ("title", "created_at", "updated_at", "id") VALUES ('client', '2014-02-07 15:24:56', '2014-02-07 15:24:56', 121898072)[0m
  [1m[35m (1.3ms)[0m  DELETE FROM "users"
  [1m[36m (0.4ms)[0m  [1mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "id", "role_id") VALUES ('client@client.com', '$2a$10$s5noEWHchLvmp/mlArayyud.o67yPVCEQNS0LgBNJIfDoftVXJjqu', '2014-02-07 15:24:56', '2014-02-07 15:24:56', 121898072, 121898072)[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "id", "role_id") VALUES ('admin@admin.com', '$2a$10$Vv2lp9DA22OfzAqdgJcUIeZJJq8jNSdCpykMQporQAGEqNSdeRKcG', '2014-02-07 15:24:56', '2014-02-07 15:24:56', 135138680, 135138680)
  [1m[36m (19.2ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------
RoleTest: test_Role_admin_have_permission_to_create_new_user
------------------------------------------------------------
  [1m[36mRole Load (0.3ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ? LIMIT 1[0m  [["id", 135138680]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------
UserTest: test_should_have_role
-------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
  [1m[36mRole Load (0.1ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36mRole Load (1.1ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 121898072]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------
UserTest: test_should_user_can
------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 121898072]]
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------
UserTest: test_user_email_must_be_certain_format
------------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------------
ChartsControllerTest: test_should_get_game_online_select_via_ajax
-----------------------------------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
Processing by ChartsController#game_online_select as JS
  Parameters: {"date"=>{"year"=>"2014", "month"=>"2", "day"=>"7"}}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 121898072 LIMIT 1[0m
  [1m[35mRole Load (0.1ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 121898072]]
  Rendered charts/_game_online_select.html.haml (25.5ms)
  Rendered charts/game_online_select.js.erb (44.6ms)
Completed 200 OK in 111ms (Views: 74.0ms | ActiveRecord: 0.2ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
ChartsControllerTest: test_should_get_on_date
---------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Processing by ChartsController#on_date as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 121898072 LIMIT 1
  [1m[36mRole Load (0.1ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 121898072]]
  Rendered charts/_game_online_select.html.haml (35.7ms)
Completed 200 OK in 126ms (Views: 85.8ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------
ChartsControllerTest: test_should_post_new_dot_via_ajax
-------------------------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
--------------------------------------------------
ChartsControllerTest: test_should_route_to_on_date
--------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------
MainControllerTest: test_should_get_index
-----------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
Processing by MainController#index as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 121898072 LIMIT 1[0m
  [1m[35mRole Load (0.5ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 121898072]]
Completed 200 OK in 36ms (Views: 15.7ms | ActiveRecord: 0.6ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
----------------------------------------------
SessionsControllerTest: test_should_fail_login
----------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"client@client.com", "password"=>"[FILTERED]"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."email" = 'client@client.com' LIMIT 1
Redirected to http://test.host/login
Completed 302 Found in 82ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------------
SessionsControllerTest: test_should_get_new
-------------------------------------------
Processing by SessionsController#new as HTML
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" IS NULL LIMIT 1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" IS NULL LIMIT 1
Completed 200 OK in 7ms (Views: 6.6ms | ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------
SessionsControllerTest: test_should_login
-----------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"client@client.com", "password"=>"[FILTERED]"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."email" = 'client@client.com' LIMIT 1
Redirected to http://test.host/
Completed 302 Found in 78ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------
SessionsControllerTest: test_should_logout
------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Processing by SessionsController#destroy as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 121898072 LIMIT 1
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 121898072]]
Redirected to http://test.host/login
Completed 302 Found in 2ms (ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersControllerTest: test_should_create_user
--------------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 135138680]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"email"=>"client@client.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1[0m
  [1m[35mRole Load (0.1ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 135138680]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (2.4ms)[0m  INSERT INTO "users" ("created_at", "email", "password_digest", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2014-02-07 15:24:56.674126"], ["email", "client@client.com"], ["password_digest", "$2a$04$slXxNsx42iZaimdOizeMxek97waXURe9V0gJWVHz8hBPjOtyJPDuS"], ["updated_at", "2014-02-07 15:24:56.674126"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/users/135138681
Completed 302 Found in 10ms (ActiveRecord: 2.7ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
---------------------------------------------
UsersControllerTest: test_should_destroy_user
---------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Processing by UsersController#destroy as HTML
  Parameters: {"id"=>"121898072"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1
  [1m[36mRole Load (0.1ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.7ms)[0m  DELETE FROM "users" WHERE "users"."id" = ?  [["id", 121898072]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/users
Completed 302 Found in 6ms (ActiveRecord: 2.0ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------
UsersControllerTest: test_should_get_edit
-----------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
Processing by UsersController#edit as HTML
  Parameters: {"id"=>"121898072"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35mRole Load (0.2ms)[0m  SELECT "roles".* FROM "roles"
  Rendered users/_form.html.haml (18.9ms)
Completed 200 OK in 27ms (Views: 24.4ms | ActiveRecord: 0.4ms)
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------
UsersControllerTest: test_should_get_index
------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
Processing by UsersController#index as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users"[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 121898072]]
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
Completed 200 OK in 33ms (Views: 30.3ms | ActiveRecord: 0.4ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------
UsersControllerTest: test_should_get_new
----------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 135138680]]
Processing by UsersController#new as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1
  [1m[36mRole Load (0.1ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mRole Load (0.1ms)[0m  SELECT "roles".* FROM "roles"
  Rendered users/_form.html.haml (4.6ms)
Completed 200 OK in 15ms (Views: 12.3ms | ActiveRecord: 0.4ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------
UsersControllerTest: test_should_show_user
------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
Processing by UsersController#show as HTML
  Parameters: {"id"=>"121898072"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Completed 200 OK in 6ms (Views: 3.6ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersControllerTest: test_should_update_user
--------------------------------------------
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 135138680]]
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"email"=>"client@client.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "id"=>"121898072"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRole Load (0.1ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 121898072]]
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.2ms)[0m  [1mUPDATE "users" SET "password_digest" = ?, "updated_at" = ? WHERE "users"."id" = 121898072[0m  [["password_digest", "$2a$04$UbcvVHjTQ83ZeX.aNxg9vOI9qOQgwaX49gjdzO37k82IBdhzhotn."], ["updated_at", "2014-02-07 15:24:56.811326"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/users/121898072
Completed 302 Found in 15ms (ActiveRecord: 1.5ms)
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[36m (54.4ms)[0m  [1mCREATE TABLE "roles" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (20.5ms)[0m  CREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255), "password_digest" varchar(255), "created_at" datetime, "updated_at" datetime, "role_id" integer) 
  [1m[36m (19.2ms)[0m  [1mCREATE  INDEX "index_users_on_role_id" ON "users" ("role_id")[0m
  [1m[35m (22.8ms)[0m  CREATE TABLE "schema_migrations" ("version" varchar(255) NOT NULL) 
  [1m[36m (17.0ms)[0m  [1mCREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")[0m
  [1m[35m (0.2ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (21.7ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140120134037')[0m
  [1m[35m (18.9ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140120115644')
  [1m[36m (21.0ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140120114246')[0m
  [1m[35m (17.0ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140120115732')
  [1m[36m (14.8ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140120133118')[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.1ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36m (2.1ms)[0m  [1mDELETE FROM "roles"[0m
  [1m[35m (1.1ms)[0m  INSERT INTO "roles" ("title", "created_at", "updated_at", "id") VALUES ('admin', '2014-02-07 15:30:27', '2014-02-07 15:30:27', 135138680)
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "roles" ("title", "created_at", "updated_at", "id") VALUES ('client', '2014-02-07 15:30:27', '2014-02-07 15:30:27', 121898072)[0m
  [1m[35m (2.2ms)[0m  DELETE FROM "users"
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "id", "role_id") VALUES ('client@client.com', '$2a$10$7m7nCdLZnNnjaad7ClkupO8q798me6GzZz0TKbAYfh5f0Fk7rFDmy', '2014-02-07 15:30:27', '2014-02-07 15:30:27', 121898072, 121898072)[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "id", "role_id") VALUES ('admin@admin.com', '$2a$10$xdpu6xNs8qhu7cB8QMijNOI5/GHQXQd5zlLhNdI.NquGejgAzcGAq', '2014-02-07 15:30:27', '2014-02-07 15:30:27', 135138680, 135138680)
  [1m[36m (23.1ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------
RoleTest: test_Role_admin_have_permission_to_create_new_user
------------------------------------------------------------
  [1m[36mRole Load (0.2ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ? LIMIT 1[0m  [["id", 135138680]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------
UserTest: test_should_have_role
-------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
  [1m[36mRole Load (0.2ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 121898072]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------
UserTest: test_should_user_can
------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 121898072]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------------
UserTest: test_user_email_must_be_certain_format
------------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------------
ChartsControllerTest: test_should_get_game_online_select_via_ajax
-----------------------------------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
Processing by ChartsController#game_online_select as JS
  Parameters: {"date"=>{"year"=>"2014", "month"=>"2", "day"=>"7"}}
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 121898072 LIMIT 1[0m
  [1m[35mRole Load (0.1ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 121898072]]
  Rendered charts/_game_online_select.html.haml (25.6ms)
  Rendered charts/game_online_select.js.erb (39.3ms)
Completed 200 OK in 116ms (Views: 75.0ms | ActiveRecord: 0.5ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
---------------------------------------------
ChartsControllerTest: test_should_get_on_date
---------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Processing by ChartsController#on_date as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 121898072 LIMIT 1
  [1m[36mRole Load (0.1ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 121898072]]
  Rendered charts/_game_online_select.html.haml (34.2ms)
Completed 200 OK in 117ms (Views: 83.5ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------
ChartsControllerTest: test_should_post_new_dot_via_ajax
-------------------------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
Processing by ChartsController#new_dot as JS
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 121898072 LIMIT 1[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 121898072]]
Completed 200 OK in 12ms (Views: 0.1ms | ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
--------------------------------------------------
ChartsControllerTest: test_should_route_to_on_date
--------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------
MainControllerTest: test_should_get_index
-----------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
Processing by MainController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 121898072 LIMIT 1[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 121898072]]
Completed 200 OK in 44ms (Views: 27.2ms | ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
----------------------------------------------
SessionsControllerTest: test_should_fail_login
----------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"client@client.com", "password"=>"[FILTERED]"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."email" = 'client@client.com' LIMIT 1
Redirected to http://test.host/login
Completed 302 Found in 76ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------
SessionsControllerTest: test_should_get_new
-------------------------------------------
Processing by SessionsController#new as HTML
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" IS NULL LIMIT 1[0m
  [1m[35mUser Load (3.3ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" IS NULL LIMIT 1
Completed 200 OK in 10ms (Views: 6.9ms | ActiveRecord: 3.4ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------
SessionsControllerTest: test_should_login
-----------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"client@client.com", "password"=>"[FILTERED]"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."email" = 'client@client.com' LIMIT 1
Redirected to http://test.host/
Completed 302 Found in 79ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------
SessionsControllerTest: test_should_logout
------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Processing by SessionsController#destroy as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 121898072 LIMIT 1
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 121898072]]
Redirected to http://test.host/login
Completed 302 Found in 2ms (ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersControllerTest: test_should_create_user
--------------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 135138680]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "users"
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"email"=>"client@client.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 135138680]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (5.3ms)[0m  INSERT INTO "users" ("created_at", "email", "password_digest", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2014-02-07 15:30:28.029514"], ["email", "client@client.com"], ["password_digest", "$2a$04$QuVyPeIAkA1HdQnZ2xBCH.KvK.1eMJ6Se4JrkPO/omdIVcCDz8We."], ["updated_at", "2014-02-07 15:30:28.029514"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/users/135138681
Completed 302 Found in 13ms (ActiveRecord: 5.6ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
---------------------------------------------
UsersControllerTest: test_should_destroy_user
---------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Processing by UsersController#destroy as HTML
  Parameters: {"id"=>"121898072"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1
  [1m[36mRole Load (0.0ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (3.4ms)[0m  DELETE FROM "users" WHERE "users"."id" = ?  [["id", 121898072]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/users
Completed 302 Found in 7ms (ActiveRecord: 3.8ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
UsersControllerTest: test_should_get_edit
-----------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
Processing by UsersController#edit as HTML
  Parameters: {"id"=>"121898072"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1[0m
  [1m[35mRole Load (0.1ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35mRole Load (0.1ms)[0m  SELECT "roles".* FROM "roles"
  Rendered users/_form.html.haml (15.8ms)
Completed 200 OK in 30ms (Views: 26.5ms | ActiveRecord: 0.6ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------
UsersControllerTest: test_should_get_index
------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
Processing by UsersController#index as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users"[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 121898072]]
  [1m[36mRole Load (0.1ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
Completed 200 OK in 32ms (Views: 30.4ms | ActiveRecord: 0.4ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------
UsersControllerTest: test_should_get_new
----------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 135138680]]
Processing by UsersController#new as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1
  [1m[36mRole Load (0.1ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mRole Load (0.1ms)[0m  SELECT "roles".* FROM "roles"
  Rendered users/_form.html.haml (6.1ms)
Completed 200 OK in 11ms (Views: 9.3ms | ActiveRecord: 0.4ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------
UsersControllerTest: test_should_show_user
------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 135138680]]
Processing by UsersController#show as HTML
  Parameters: {"id"=>"121898072"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 135138680]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 121898072]]
Completed 200 OK in 13ms (Views: 3.0ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersControllerTest: test_should_update_user
--------------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 135138680]]
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"email"=>"client@client.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "id"=>"121898072"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = 135138680 LIMIT 1
  [1m[36mRole Load (0.1ms)[0m  [1mSELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1[0m  [["id", 135138680]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 121898072]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRole Load (0.0ms)[0m  SELECT  "roles".* FROM "roles"  WHERE "roles"."id" = ?  ORDER BY "roles"."id" ASC LIMIT 1  [["id", 121898072]]
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (2.0ms)[0m  [1mUPDATE "users" SET "password_digest" = ?, "updated_at" = ? WHERE "users"."id" = 121898072[0m  [["password_digest", "$2a$04$Vk.k/CjMS9Z0BDmSlBIJwuqmDWyU63ogZBhyui2PGogoeRD3.c9B2"], ["updated_at", "2014-02-07 15:30:28.182394"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/users/121898072
Completed 302 Found in 14ms (ActiveRecord: 2.5ms)
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
